<!DOCTYPE html><html lang=en class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="A guide to building a highly customisable, lightweight, secure, and performant static site using MkDocs, NGINX and Docker."><meta name=author content="Matt Shaw"><link href="https://matthew-shaw.github.io/blog/2024/11/04/building-a-static-site-with-mkdocs-nginx-and-docker/" rel="canonical"><link href=../../../09/05/fitness-progress/ rel=prev><link href=../../../../2025/10/25/the-eight-wastes-of-modern-software-delivery/ rel=next><link rel=alternate type=application/rss+xml title="RSS feed" href=../../../../../feed_rss_created.xml><link rel=alternate type=application/rss+xml title="RSS feed of updated content" href=../../../../../feed_rss_updated.xml><link rel=icon href=../../../../../assets/images/favicon.svg><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.6.22"><title>Building a static site with MkDocs, NGINX and Docker - Matt Shaw</title><link rel=stylesheet href=../../../../../assets/stylesheets/main.84d31ad4.min.css><link rel=stylesheet href=../../../../../assets/stylesheets/palette.06af60db.min.css><style>:root{.md-tag.md-tag--accessibility{--md-tag-icon:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%20512%20512%22%3E%3C%21--%21%20Font%20Awesome%20Free%207.1.0%20by%20%40fontawesome%20-%20https%3A//fontawesome.com%20License%20-%20https%3A//fontawesome.com/license/free%20%28Icons%3A%20CC%20BY%204.0%2C%20Fonts%3A%20SIL%20OFL%201.1%2C%20Code%3A%20MIT%20License%29%20Copyright%202025%20Fonticons%2C%20Inc.--%3E%3Cpath%20d%3D%22M0%20256a256%20256%200%201%201%20512%200%20256%20256%200%201%201-512%200m161.5-86.1c-12.2-5.2-26.3.4-31.5%2012.6s.4%2026.3%2012.6%2031.5l11.9%205.1c17.3%207.4%2035.2%2012.9%2053.6%2016.3v50.1c0%204.3-.7%208.6-2.1%2012.6l-28.7%2086.1c-4.2%2012.6%202.6%2026.2%2015.2%2030.4s26.2-2.6%2030.4-15.2l24.4-73.2c1.3-3.8%204.8-6.4%208.8-6.4s7.6%202.6%208.8%206.4l24.4%2073.2c4.2%2012.6%2017.8%2019.4%2030.4%2015.2s19.3-17.6%2015.1-30.2l-28.7-86.1q-2.1-6.15-2.1-12.6v-50.1c18.4-3.5%2036.3-8.9%2053.6-16.3l11.9-5.1c12.2-5.2%2017.8-19.3%2012.6-31.5s-19.3-17.8-31.5-12.6l-11.9%204.9c-26.1%2011.2-54.2%2017-82.7%2017s-56.5-5.8-82.7-17l-11.9-5.1zM256%20160a40%2040%200%201%200%200-80%2040%2040%200%201%200%200%2080%22/%3E%3C/svg%3E');}.md-tag.md-tag--agile{--md-tag-icon:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%20512%20512%22%3E%3C%21--%21%20Font%20Awesome%20Free%207.1.0%20by%20%40fontawesome%20-%20https%3A//fontawesome.com%20License%20-%20https%3A//fontawesome.com/license/free%20%28Icons%3A%20CC%20BY%204.0%2C%20Fonts%3A%20SIL%20OFL%201.1%2C%20Code%3A%20MIT%20License%29%20Copyright%202025%20Fonticons%2C%20Inc.--%3E%3Cpath%20d%3D%22M481.7%20240.1c-17.6-1.2-32.9%2012-34.2%2029.7-3.3%2047-23.6%2089.4-54.8%20121L361%20359c-6.9-6.9-17.2-8.9-26.2-5.2S320%20366.3%20320%20376v112c0%2013.3%2010.7%2024%2024%2024h112c9.7%200%2018.5-5.8%2022.2-14.8s1.7-19.3-5.2-26.2l-35-35c41.7-42.2%2068.9-98.8%2073.4-161.8%201.2-17.6-12-32.9-29.7-34.2zM39%2041l35%2035C32.3%20118.2%205.1%20174.8.6%20237.8c-1.2%2017.6%2012%2032.9%2029.7%2034.2s32.9-12%2034.2-29.7c3.3-47%2023.6-89.4%2054.8-121L151%20153c6.9%206.9%2017.2%208.9%2026.2%205.2S192%20145.7%20192%20136V24c0-13.3-10.7-24-24-24H56c-9.7%200-18.5%205.8-22.2%2014.8S32.2%2034.1%2039%2041m201-10.7c-1.2%2017.6%2012%2032.9%2029.7%2034.2%2047%203.3%2089.4%2023.6%20121%2054.8L359%20151c-6.9%206.9-8.9%2017.2-5.2%2026.2S366.3%20192%20376%20192h112c13.3%200%2024-10.7%2024-24V56c0-9.7-5.8-18.5-14.8-22.2S477.9%2032.2%20471%2039l-35%2035C393.8%2032.3%20337.2%205.1%20274.2.6c-17.6-1.2-32.9%2012-34.2%2029.7M41%20473l35-35c42.2%2041.7%2098.8%2068.9%20161.8%2073.4%2017.6%201.2%2032.9-12%2034.2-29.7s-12-32.9-29.7-34.2c-47-3.3-89.4-23.6-121-54.8L153%20361c6.9-6.9%208.9-17.2%205.2-26.2S145.7%20320%20136%20320H24c-13.3%200-24%2010.7-24%2024v112c0%209.7%205.8%2018.5%2014.8%2022.2s19.3%201.6%2026.2-5.2%22/%3E%3C/svg%3E');}.md-tag.md-tag--bootstrap{--md-tag-icon:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%20576%20512%22%3E%3C%21--%21%20Font%20Awesome%20Free%207.1.0%20by%20%40fontawesome%20-%20https%3A//fontawesome.com%20License%20-%20https%3A//fontawesome.com/license/free%20%28Icons%3A%20CC%20BY%204.0%2C%20Fonts%3A%20SIL%20OFL%201.1%2C%20Code%3A%20MIT%20License%29%20Copyright%202025%20Fonticons%2C%20Inc.--%3E%3Cpath%20d%3D%22M333.5%20201.4c0-22.1-15.6-34.3-43-34.3h-50.4v71.2h42.5c32.8-.1%2050.9-13.3%2050.9-36.9M517%20188.6c-9.5-30.9-10.9-68.8-9.8-98.1C508.3%2060%20484.5%2032%20452.5%2032H123.7C91.6%2032%2067.9%2060.1%2069%2090.5c1%2029.3-.3%2067.2-9.8%2098.1-9.6%2031-25.7%2050.6-52.2%2053.1v28.5c26.4%202.5%2042.6%2022.1%2052.2%2053.1%209.5%2030.9%2010.9%2068.8%209.8%2098.1-1.1%2030.5%2022.7%2058.5%2054.7%2058.5h328.7c32.1%200%2055.8-28.1%2054.7-58.5-1-29.3.3-67.2%209.8-98.1%209.6-31%2025.7-50.6%2052.1-53.1v-28.5c-26.3-2.5-42.5-22.1-52-53.1M300.2%20375.1h-97.9V136.8h97.4c43.3%200%2071.7%2023.4%2071.7%2059.4%200%2025.3-19.1%2047.9-43.5%2051.8v1.3c33.2%203.6%2055.5%2026.6%2055.5%2058.3%200%2042.1-31.3%2067.5-83.2%2067.5m-10-108.7h-50.1v78.4h52.3c34.2%200%2052.3-13.7%2052.3-39.5%200-25.7-18.6-38.9-54.5-38.9%22/%3E%3C/svg%3E');}.md-tag.md-tag--cicd{--md-tag-icon:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%20512%20512%22%3E%3C%21--%21%20Font%20Awesome%20Free%207.1.0%20by%20%40fontawesome%20-%20https%3A//fontawesome.com%20License%20-%20https%3A//fontawesome.com/license/free%20%28Icons%3A%20CC%20BY%204.0%2C%20Fonts%3A%20SIL%20OFL%201.1%2C%20Code%3A%20MIT%20License%29%20Copyright%202025%20Fonticons%2C%20Inc.--%3E%3Cpath%20d%3D%22M328%2024c0-9.7-5.8-18.5-14.8-22.2S293.9.2%20287%207l-56%2056c-9.4%209.4-9.4%2024.6%200%2033.9l56%2056c6.9%206.9%2017.2%208.9%2026.2%205.2S328%20145.7%20328%20136v-24h24c17.7%200%2032%2014.3%2032%2032v214.7c-28.3%2012.3-48%2040.5-48%2073.3%200%2044.2%2035.8%2080%2080%2080s80-35.8%2080-80c0-32.8-19.7-61-48-73.3V144c0-53-43-96-96-96h-24zM72%2080a24%2024%200%201%201%2048%200%2024%2024%200%201%201-48%200m56%2073.3c28.3-12.3%2048-40.5%2048-73.3%200-44.2-35.8-80-80-80S16%2035.8%2016%2080c0%2032.8%2019.7%2061%2048%2073.3v205.3c-28.3%2012.3-48%2040.5-48%2073.3%200%2044.2%2035.8%2080%2080%2080s80-35.8%2080-80c0-32.8-19.7-61-48-73.3zM72%20432a24%2024%200%201%201%2048%200%2024%2024%200%201%201-48%200m344-24a24%2024%200%201%201%200%2048%2024%2024%200%201%201%200-48%22/%3E%3C/svg%3E');}.md-tag.md-tag--database{--md-tag-icon:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%20448%20512%22%3E%3C%21--%21%20Font%20Awesome%20Free%207.1.0%20by%20%40fontawesome%20-%20https%3A//fontawesome.com%20License%20-%20https%3A//fontawesome.com/license/free%20%28Icons%3A%20CC%20BY%204.0%2C%20Fonts%3A%20SIL%20OFL%201.1%2C%20Code%3A%20MIT%20License%29%20Copyright%202025%20Fonticons%2C%20Inc.--%3E%3Cpath%20d%3D%22M448%20205.8c-14.8%209.8-31.8%2017.7-49.5%2024-47%2016.8-108.7%2026.2-174.5%2026.2s-127.6-9.5-174.5-26.2c-17.6-6.3-34.7-14.2-49.5-24V288c0%2044.2%20100.3%2080%20224%2080s224-35.8%20224-80zm0-77.8V80c0-44.2-100.3-80-224-80S0%2035.8%200%2080v48c0%2044.2%20100.3%2080%20224%2080s224-35.8%20224-80m-49.5%20261.8C351.6%20406.5%20289.9%20416%20224%20416s-127.6-9.5-174.5-26.2c-17.6-6.3-34.7-14.2-49.5-24V432c0%2044.2%20100.3%2080%20224%2080s224-35.8%20224-80v-66.2c-14.8%209.8-31.8%2017.7-49.5%2024%22/%3E%3C/svg%3E');}.md-tag.md-tag--docker{--md-tag-icon:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%20640%20512%22%3E%3C%21--%21%20Font%20Awesome%20Free%207.1.0%20by%20%40fontawesome%20-%20https%3A//fontawesome.com%20License%20-%20https%3A//fontawesome.com/license/free%20%28Icons%3A%20CC%20BY%204.0%2C%20Fonts%3A%20SIL%20OFL%201.1%2C%20Code%3A%20MIT%20License%29%20Copyright%202025%20Fonticons%2C%20Inc.--%3E%3Cpath%20d%3D%22M349.9%20236.3h-66.1v-59.4h66.1zm0-204.3h-66.1v60.7h66.1zm78.2%20144.8H362v59.4h66.1zm-156.3-72.1h-66.1v60.1h66.1zm78.1%200h-66.1v60.1h66.1zm276.8%20100c-14.4-9.7-47.6-13.2-73.1-8.4-3.3-24-16.7-44.9-41.1-63.7l-14-9.3-9.3%2014c-18.4%2027.8-23.4%2073.6-3.7%20103.8-8.7%204.7-25.8%2011.1-48.4%2010.7H2.4c-8.7%2050.8%205.8%20116.8%2044%20162.1%2037.1%2043.9%2092.7%2066.2%20165.4%2066.2%20157.4%200%20273.9-72.5%20328.4-204.2%2021.4.4%2067.6.1%2091.3-45.2%201.5-2.5%206.6-13.2%208.5-17.1zm-511.1-27.9h-66v59.4h66.1v-59.4zm78.1%200h-66.1v59.4h66.1zm78.1%200h-66.1v59.4h66.1zm-78.1-72.1h-66.1v60.1h66.1z%22/%3E%3C/svg%3E');}.md-tag.md-tag--fitness{--md-tag-icon:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%20512%20512%22%3E%3C%21--%21%20Font%20Awesome%20Free%207.1.0%20by%20%40fontawesome%20-%20https%3A//fontawesome.com%20License%20-%20https%3A//fontawesome.com/license/free%20%28Icons%3A%20CC%20BY%204.0%2C%20Fonts%3A%20SIL%20OFL%201.1%2C%20Code%3A%20MIT%20License%29%20Copyright%202025%20Fonticons%2C%20Inc.--%3E%3Cpath%20d%3D%22m256%20107.9-15-20.8C216%2052.5%20175.9%2032%20133.1%2032%2059.6%2032%200%2091.6%200%20165.1v2.6c0%2023.6%206.2%2048%2016.6%2072.3h106c3.2%200%206.1-1.9%207.4-4.9l31.8-76.3c3.7-8.8%2012.3-14.6%2021.8-14.8s18.3%205.4%2022.2%2014.1L257.1%20272l41.4-82.8c4.1-8.1%2012.4-13.3%2021.5-13.3s17.4%205.1%2021.5%2013.3l23.2%2046.3c1.4%202.7%204.1%204.4%207.2%204.4h123.6c10.5-24.3%2016.6-48.7%2016.6-72.3V165C512%2091.6%20452.4%2032%20378.9%2032%20336.2%2032%20296%2052.5%20271%2087.1l-15%2020.7zM469.6%20288h-97.8c-21.2%200-40.6-12-50.1-31l-1.7-3.4-42.5%2085.1c-4.1%208.3-12.7%2013.5-22%2013.3s-17.6-5.7-21.4-14.1l-49.3-109.5-10.5%2025.2c-8.7%2020.9-29.1%2034.5-51.7%2034.5H42.4c47.2%2073.8%20123%20141.7%20170.4%20177.9%2012.4%209.4%2027.6%2014.1%2043.1%2014.1s30.8-4.6%2043.1-14.1c47.6-36.3%20123.4-104.2%20170.6-178%22/%3E%3C/svg%3E');}.md-tag.md-tag--govuk{--md-tag-icon:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%20576%20512%22%3E%3C%21--%21%20Font%20Awesome%20Free%207.1.0%20by%20%40fontawesome%20-%20https%3A//fontawesome.com%20License%20-%20https%3A//fontawesome.com/license/free%20%28Icons%3A%20CC%20BY%204.0%2C%20Fonts%3A%20SIL%20OFL%201.1%2C%20Code%3A%20MIT%20License%29%20Copyright%202025%20Fonticons%2C%20Inc.--%3E%3Cpath%20d%3D%22M313%2087.2c9.2-7.3%2015-18.6%2015-31.2%200-22.1-17.9-40-40-40s-40%2017.9-40%2040c0%2012.6%205.9%2023.9%2015%2031.2l-68.4%20107.6c-10%2015.7-31.3%2019.6-46.2%208.4l-59.5-44.5c4.5-6.4%207.1-14.3%207.1-22.7%200-22.1-17.9-40-40-40s-40%2017.9-40%2040c0%2021.8%2017.5%2039.6%2039.2%2040l32.6%20217.5c4.7%2031.3%2031.6%2054.5%2063.3%2054.5h273.8c31.7%200%2058.6-23.2%2063.3-54.5L520.8%20176c21.7-.4%2039.2-18.2%2039.2-40%200-22.1-17.9-40-40-40s-40%2017.9-40%2040c0%208.4%202.6%2016.3%207.1%2022.7l-59.4%2044.6c-14.9%2011.2-36.2%207.3-46.2-8.4z%22/%3E%3C/svg%3E');}.md-tag.md-tag--javascript{--md-tag-icon:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%20448%20512%22%3E%3C%21--%21%20Font%20Awesome%20Free%207.1.0%20by%20%40fontawesome%20-%20https%3A//fontawesome.com%20License%20-%20https%3A//fontawesome.com/license/free%20%28Icons%3A%20CC%20BY%204.0%2C%20Fonts%3A%20SIL%20OFL%201.1%2C%20Code%3A%20MIT%20License%29%20Copyright%202025%20Fonticons%2C%20Inc.--%3E%3Cpath%20d%3D%22M0%2032v448h448V32zm243.8%20349.4c0%2043.6-25.6%2063.5-62.9%2063.5-33.7%200-53.2-17.4-63.2-38.5l34.3-20.7c6.6%2011.7%2012.6%2021.6%2027.1%2021.6%2013.8%200%2022.6-5.4%2022.6-26.5V237.7h42.1zm99.6%2063.5c-39.1%200-64.4-18.6-76.7-43l34.3-19.8c9%2014.7%2020.8%2025.6%2041.5%2025.6%2017.4%200%2028.6-8.7%2028.6-20.8%200-14.4-11.4-19.5-30.7-28l-10.5-4.5c-30.4-12.9-50.5-29.2-50.5-63.5%200-31.6%2024.1-55.6%2061.6-55.6%2026.8%200%2046%209.3%2059.8%2033.7L368%20290c-7.2-12.9-15-18-27.1-18-12.3%200-20.1%207.8-20.1%2018%200%2012.6%207.8%2017.7%2025.9%2025.6l10.5%204.5c35.8%2015.3%2055.9%2031%2055.9%2066.2%200%2037.8-29.8%2058.6-69.7%2058.6%22/%3E%3C/svg%3E');}.md-tag.md-tag--location{--md-tag-icon:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%20384%20512%22%3E%3C%21--%21%20Font%20Awesome%20Free%207.1.0%20by%20%40fontawesome%20-%20https%3A//fontawesome.com%20License%20-%20https%3A//fontawesome.com/license/free%20%28Icons%3A%20CC%20BY%204.0%2C%20Fonts%3A%20SIL%20OFL%201.1%2C%20Code%3A%20MIT%20License%29%20Copyright%202025%20Fonticons%2C%20Inc.--%3E%3Cpath%20d%3D%22M0%20188.6C0%2084.4%2086%200%20192%200s192%2084.4%20192%20188.6c0%20119.3-120.2%20262.3-170.4%20316.8-11.8%2012.8-31.5%2012.8-43.3%200C120.1%20450.9-.1%20307.9-.1%20188.6zM192%20256a64%2064%200%201%200%200-128%2064%2064%200%201%200%200%20128%22/%3E%3C/svg%3E');}.md-tag.md-tag--markdown{--md-tag-icon:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%20640%20512%22%3E%3C%21--%21%20Font%20Awesome%20Free%207.1.0%20by%20%40fontawesome%20-%20https%3A//fontawesome.com%20License%20-%20https%3A//fontawesome.com/license/free%20%28Icons%3A%20CC%20BY%204.0%2C%20Fonts%3A%20SIL%20OFL%201.1%2C%20Code%3A%20MIT%20License%29%20Copyright%202025%20Fonticons%2C%20Inc.--%3E%3Cpath%20d%3D%22M593.8%2059.1H46.2C20.7%2059.1%200%2079.8%200%20105.2v301.5c0%2025.5%2020.7%2046.2%2046.2%2046.2h547.7c25.5%200%2046.2-20.7%2046.1-46.1V105.2c0-25.4-20.7-46.1-46.2-46.1M338.5%20360.6H277v-120l-61.5%2076.9-61.5-76.9v120H92.3V151.4h61.5l61.5%2076.9%2061.5-76.9h61.5v209.2zm135.3%203.1L381.5%20256H443V151.4h61.5V256H566z%22/%3E%3C/svg%3E');}.md-tag.md-tag--mental-health{--md-tag-icon:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%20512%20512%22%3E%3C%21--%21%20Font%20Awesome%20Free%207.1.0%20by%20%40fontawesome%20-%20https%3A//fontawesome.com%20License%20-%20https%3A//fontawesome.com/license/free%20%28Icons%3A%20CC%20BY%204.0%2C%20Fonts%3A%20SIL%20OFL%201.1%2C%20Code%3A%20MIT%20License%29%20Copyright%202025%20Fonticons%2C%20Inc.--%3E%3Cpath%20d%3D%22M120%2056c0-30.9%2025.1-56%2056-56h24c17.7%200%2032%2014.3%2032%2032v448c0%2017.7-14.3%2032-32%2032h-32c-29.8%200-54.9-20.4-62-48h-2c-44.2%200-80-35.8-80-80%200-18%206-34.6%2016-48-19.4-14.6-32-37.8-32-64%200-30.9%2017.6-57.8%2043.2-71.1-7.1-12-11.2-26-11.2-40.9%200-44.2%2035.8-80%2080-80zm272%200v24c44.2%200%2080%2035.8%2080%2080%200%2015-4.1%2029-11.2%2040.9C486.5%20214.2%20504%20241%20504%20272c0%2026.2-12.6%2049.4-32%2064%2010%2013.4%2016%2030%2016%2048%200%2044.2-35.8%2080-80%2080h-2c-7.1%2027.6-32.2%2048-62%2048h-32c-17.7%200-32-14.3-32-32V32c0-17.7%2014.3-32%2032-32h24c30.9%200%2056%2025.1%2056%2056%22/%3E%3C/svg%3E');}.md-tag.md-tag--nodejs{--md-tag-icon:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%20448%20512%22%3E%3C%21--%21%20Font%20Awesome%20Free%207.1.0%20by%20%40fontawesome%20-%20https%3A//fontawesome.com%20License%20-%20https%3A//fontawesome.com/license/free%20%28Icons%3A%20CC%20BY%204.0%2C%20Fonts%3A%20SIL%20OFL%201.1%2C%20Code%3A%20MIT%20License%29%20Copyright%202025%20Fonticons%2C%20Inc.--%3E%3Cpath%20d%3D%22M224.5%20508c-6.7%200-13.5-1.8-19.4-5.2l-61.7-36.5c-9.2-5.2-4.7-7-1.7-8%2012.3-4.3%2014.8-5.2%2027.9-12.7%201.4-.8%203.2-.5%204.6.4l47.4%2028.1c1.7%201%204.1%201%205.7%200L412%20367.5c1.7-1%202.8-3%202.8-5V149.3c0-2.1-1.1-4-2.9-5.1L227.3%2037.7c-1.7-1-4-1-5.7%200L37.1%20144.3c-1.8%201-2.9%203-2.9%205.1v213.1c0%202%201.1%204%202.9%204.9l50.6%2029.2c27.5%2013.7%2044.3-2.4%2044.3-18.7V167.5c0-3%202.4-5.3%205.4-5.3h23.4c2.9%200%205.4%202.3%205.4%205.3V378c0%2036.6-20%2057.6-54.7%2057.6-10.7%200-19.1%200-42.5-11.6l-48.4-27.9c-12-6.9-19.4-19.8-19.4-33.7V149.3c0-13.8%207.4-26.8%2019.4-33.7L205.1%209c11.7-6.6%2027.2-6.6%2038.8%200l184.7%20106.7c12%206.9%2019.4%2019.8%2019.4%2033.7v213.1c0%2013.8-7.4%2026.7-19.4%2033.7L243.9%20502.8c-5.9%203.4-12.6%205.2-19.4%205.2m149.1-210.1c0-39.9-27-50.5-83.7-58-57.4-7.6-63.2-11.5-63.2-24.9%200-11.1%204.9-25.9%2047.4-25.9%2037.9%200%2051.9%208.2%2057.7%2033.8.5%202.4%202.7%204.2%205.2%204.2h24c1.5%200%202.9-.6%203.9-1.7s1.5-2.6%201.4-4.1c-3.7-44.1-33-64.6-92.2-64.6-52.7%200-84.1%2022.2-84.1%2059.5%200%2040.4%2031.3%2051.6%2081.8%2056.6%2060.5%205.9%2065.2%2014.8%2065.2%2026.7%200%2020.6-16.6%2029.4-55.5%2029.4-48.9%200-59.6-12.3-63.2-36.6-.4-2.6-2.6-4.5-5.3-4.5h-23.9c-3%200-5.3%202.4-5.3%205.3%200%2031.1%2016.9%2068.2%2097.8%2068.2%2058.4-.1%2092-23.2%2092-63.4%22/%3E%3C/svg%3E');}.md-tag.md-tag--performance{--md-tag-icon:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%20512%20512%22%3E%3C%21--%21%20Font%20Awesome%20Free%207.1.0%20by%20%40fontawesome%20-%20https%3A//fontawesome.com%20License%20-%20https%3A//fontawesome.com/license/free%20%28Icons%3A%20CC%20BY%204.0%2C%20Fonts%3A%20SIL%20OFL%201.1%2C%20Code%3A%20MIT%20License%29%20Copyright%202025%20Fonticons%2C%20Inc.--%3E%3Cpath%20d%3D%22M0%20256a256%20256%200%201%201%20512%200%20256%20256%200%201%201-512%200M288%2096a32%2032%200%201%200-64%200%2032%2032%200%201%200%2064%200m-32%20320c35.3%200%2064-28.7%2064-64%200-16.2-6-31.1-16-42.3l69.5-138.9c5.9-11.9%201.1-26.3-10.7-32.2s-26.3-1.1-32.2%2010.7l-69.5%20138.9c-1.7-.1-3.4-.2-5.1-.2-35.3%200-64%2028.7-64%2064s28.7%2064%2064%2064m-80-272a32%2032%200%201%200-64%200%2032%2032%200%201%200%2064%200M96%20288a32%2032%200%201%200%200-64%2032%2032%200%201%200%200%2064m352-32a32%2032%200%201%200-64%200%2032%2032%200%201%200%2064%200%22/%3E%3C/svg%3E');}.md-tag.md-tag--python{--md-tag-icon:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%20448%20512%22%3E%3C%21--%21%20Font%20Awesome%20Free%207.1.0%20by%20%40fontawesome%20-%20https%3A//fontawesome.com%20License%20-%20https%3A//fontawesome.com/license/free%20%28Icons%3A%20CC%20BY%204.0%2C%20Fonts%3A%20SIL%20OFL%201.1%2C%20Code%3A%20MIT%20License%29%20Copyright%202025%20Fonticons%2C%20Inc.--%3E%3Cpath%20d%3D%22M439.8%20200.5c-7.7-30.9-22.3-54.2-53.4-54.2h-40.1v47.4c0%2036.8-31.2%2067.8-66.8%2067.8H172.7c-29.2%200-53.4%2025-53.4%2054.3v101.8c0%2029%2025.2%2046%2053.4%2054.3%2033.8%209.9%2066.3%2011.7%20106.8%200%2026.9-7.8%2053.4-23.5%2053.4-54.3v-40.7H226.2v-13.6h160.2c31.1%200%2042.6-21.7%2053.4-54.2%2011.2-33.5%2010.7-65.7%200-108.6M286.2%20444.7a20.4%2020.4%200%201%201%200-40.7%2020.4%2020.4%200%201%201%200%2040.7M167.8%20248.1h106.8c29.7%200%2053.4-24.5%2053.4-54.3V91.9c0-29-24.4-50.7-53.4-55.6-35.8-5.9-74.7-5.6-106.8.1-45.2%208-53.4%2024.7-53.4%2055.6v40.7h106.9v13.6h-147c-31.1%200-58.3%2018.7-66.8%2054.2-9.8%2040.7-10.2%2066.1%200%20108.6%207.6%2031.6%2025.7%2054.2%2056.8%2054.2H101v-48.8c0-35.3%2030.5-66.4%2066.8-66.4m-6.6-183.4a20.4%2020.4%200%201%201%200%2040.8%2020.4%2020.4%200%201%201%200-40.8%22/%3E%3C/svg%3E');}.md-tag.md-tag--running{--md-tag-icon:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%20448%20512%22%3E%3C%21--%21%20Font%20Awesome%20Free%207.1.0%20by%20%40fontawesome%20-%20https%3A//fontawesome.com%20License%20-%20https%3A//fontawesome.com/license/free%20%28Icons%3A%20CC%20BY%204.0%2C%20Fonts%3A%20SIL%20OFL%201.1%2C%20Code%3A%20MIT%20License%29%20Copyright%202025%20Fonticons%2C%20Inc.--%3E%3Cpath%20d%3D%22M256.5-32a56%2056%200%201%201%200%20112%2056%2056%200%201%201%200-112M123.6%20176c-3.3%200-6.2%202-7.4%205l-22%2054.9c-6.6%2016.4-25.2%2024.4-41.6%2017.8s-24.4-25.2-17.8-41.6l21.9-54.9c11-27.3%2037.4-45.2%2066.9-45.2h97.3c28.5%200%2054.8%2015.1%2069.1%2039.7l32.8%2056.3h61.6c17.7%200%2032%2014.3%2032%2032s-14.3%2032-32%2032h-61.6c-22.8%200-43.8-12.1-55.3-31.8l-10-17.1-20.7%2070.4%2075.4%2022.6c27.7%208.3%2041.8%2039%2030.1%2065.5L285.7%20509c-7.2%2016.2-26.1%2023.4-42.2%2016.2s-23.4-26.1-16.2-42.2l49.2-110.8-95.9-28.8c-32.7-9.8-52-43.7-43.7-76.8l22.7-90.6h-35.9zm-8%20181c13.3%2014.9%2030.7%2026.3%2051.2%2032.4l4.7%201.4-6.9%2019.3c-5.8%2016.3-16%2030.8-29.3%2041.8l-82.4%2067.9c-13.6%2011.2-33.8%209.3-45-4.3s-9.3-33.8%204.3-45l82.4-67.9c4.5-3.7%207.8-8.5%209.8-13.9z%22/%3E%3C/svg%3E');}.md-tag.md-tag--security{--md-tag-icon:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%20512%20512%22%3E%3C%21--%21%20Font%20Awesome%20Free%207.1.0%20by%20%40fontawesome%20-%20https%3A//fontawesome.com%20License%20-%20https%3A//fontawesome.com/license/free%20%28Icons%3A%20CC%20BY%204.0%2C%20Fonts%3A%20SIL%20OFL%201.1%2C%20Code%3A%20MIT%20License%29%20Copyright%202025%20Fonticons%2C%20Inc.--%3E%3Cpath%20d%3D%22M256%200c4.6%200%209.2%201%2013.4%202.9l188.4%2079.9c22%209.3%2038.4%2031%2038.3%2057.2-.5%2099.2-41.3%20280.7-213.6%20363.2-16.7%208-36.1%208-52.8%200C57.3%20420.7%2016.6%20239.2%2016.1%20140c-.1-26.2%2016.3-47.9%2038.3-57.2L242.7%202.9C246.9%201%20251.4%200%20256%200m0%2066.8v378.1c138-66.8%20175.1-214.8%20176-303.4L256%2066.9z%22/%3E%3C/svg%3E');}.md-tag.md-tag--server{--md-tag-icon:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%20448%20512%22%3E%3C%21--%21%20Font%20Awesome%20Free%207.1.0%20by%20%40fontawesome%20-%20https%3A//fontawesome.com%20License%20-%20https%3A//fontawesome.com/license/free%20%28Icons%3A%20CC%20BY%204.0%2C%20Fonts%3A%20SIL%20OFL%201.1%2C%20Code%3A%20MIT%20License%29%20Copyright%202025%20Fonticons%2C%20Inc.--%3E%3Cpath%20d%3D%22M64%2032C28.7%2032%200%2060.7%200%2096v64c0%2035.3%2028.7%2064%2064%2064h320c35.3%200%2064-28.7%2064-64V96c0-35.3-28.7-64-64-64zm216%2072a24%2024%200%201%201%200%2048%2024%2024%200%201%201%200-48m56%2024a24%2024%200%201%201%2048%200%2024%2024%200%201%201-48%200M64%20288c-35.3%200-64%2028.7-64%2064v64c0%2035.3%2028.7%2064%2064%2064h320c35.3%200%2064-28.7%2064-64v-64c0-35.3-28.7-64-64-64zm216%2072a24%2024%200%201%201%200%2048%2024%2024%200%201%201%200-48m56%2024a24%2024%200%201%201%2048%200%2024%2024%200%201%201-48%200%22/%3E%3C/svg%3E');}.md-tag.md-tag--team{--md-tag-icon:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%20640%20512%22%3E%3C%21--%21%20Font%20Awesome%20Free%207.1.0%20by%20%40fontawesome%20-%20https%3A//fontawesome.com%20License%20-%20https%3A//fontawesome.com/license/free%20%28Icons%3A%20CC%20BY%204.0%2C%20Fonts%3A%20SIL%20OFL%201.1%2C%20Code%3A%20MIT%20License%29%20Copyright%202025%20Fonticons%2C%20Inc.--%3E%3Cpath%20d%3D%22M320%2016a104%20104%200%201%201%200%20208%20104%20104%200%201%201%200-208M96%2088a72%2072%200%201%201%200%20144%2072%2072%200%201%201%200-144M0%20416c0-70.7%2057.3-128%20128-128%2012.8%200%2025.2%201.9%2036.9%205.4C132%20330.2%20112%20378.8%20112%20432v16c0%2011.4%202.4%2022.2%206.7%2032H32c-17.7%200-32-14.3-32-32zm521.3%2064c4.3-9.8%206.7-20.6%206.7-32v-16c0-53.2-20-101.8-52.9-138.6%2011.7-3.5%2024.1-5.4%2036.9-5.4%2070.7%200%20128%2057.3%20128%20128v32c0%2017.7-14.3%2032-32%2032zM472%20160a72%2072%200%201%201%20144%200%2072%2072%200%201%201-144%200M160%20432c0-88.4%2071.6-160%20160-160s160%2071.6%20160%20160v16c0%2017.7-14.3%2032-32%2032H192c-17.7%200-32-14.3-32-32z%22/%3E%3C/svg%3E');}.md-tag.md-tag--ux{--md-tag-icon:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%20512%20512%22%3E%3C%21--%21%20Font%20Awesome%20Free%207.1.0%20by%20%40fontawesome%20-%20https%3A//fontawesome.com%20License%20-%20https%3A//fontawesome.com/license/free%20%28Icons%3A%20CC%20BY%204.0%2C%20Fonts%3A%20SIL%20OFL%201.1%2C%20Code%3A%20MIT%20License%29%20Copyright%202025%20Fonticons%2C%20Inc.--%3E%3Cpath%20d%3D%22M256%20512a256%20256%200%201%200%200-512%20256%20256%200%201%200%200%20512m130.7-203.1c11.9-3.7%2023.9%206.3%2019.6%2018.1C383.9%20388.3%20325%20432.1%20256%20432.1s-127.9-43.9-150.3-105.2c-4.3-11.8%207.7-21.8%2019.6-18.1C164.5%20321%20209%20327.9%20256%20327.9s91.5-6.9%20130.7-19.1zM144%20208a32%2032%200%201%201%2064%200%2032%2032%200%201%201-64%200m192-32a32%2032%200%201%201%200%2064%2032%2032%200%201%201%200-64%22/%3E%3C/svg%3E');}.md-tag.md-tag--weight-loss{--md-tag-icon:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%20448%20512%22%3E%3C%21--%21%20Font%20Awesome%20Free%207.1.0%20by%20%40fontawesome%20-%20https%3A//fontawesome.com%20License%20-%20https%3A//fontawesome.com/license/free%20%28Icons%3A%20CC%20BY%204.0%2C%20Fonts%3A%20SIL%20OFL%201.1%2C%20Code%3A%20MIT%20License%29%20Copyright%202025%20Fonticons%2C%20Inc.--%3E%3Cpath%20d%3D%22M116.6%20192c-3-10.1-4.6-20.9-4.6-32%200-61.9%2050.1-112%20112-112s112%2050.1%20112%20112c0%2011.1-1.6%2021.9-4.6%2032h-71l24.6-44.3c6.4-11.6%202.3-26.2-9.3-32.6s-26.2-2.3-32.6%209.3l-37.6%2067.7h-88.8zM128%2032H64C28.7%2032%200%2060.7%200%2096v320c0%2035.3%2028.7%2064%2064%2064h320c35.3%200%2064-28.7%2064-64V96c0-35.3-28.7-64-64-64h-64c-26.7-20.1-60-32-96-32s-69.3%2011.9-96%2032%22/%3E%3C/svg%3E');}}</style><link rel="stylesheet" href="../../../../../assets/external/fonts.googleapis.com/css.49ea35f2.css"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../../../../../stylesheets/extra.c32be6.min.css><script>__md_scope=new URL("../../../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><meta property=og:type content=website><meta property=og:title content="Building a static site with MkDocs, NGINX and Docker - Matt Shaw"><meta property=og:description content="A guide to building a highly customisable, lightweight, secure, and performant static site using MkDocs, NGINX and Docker."><meta property=og:image content=https://matthew-shaw.github.io/assets/images/social/blog/posts/mkdocs-docker-nginx.png><meta property=og:image:type content=image/png><meta property=og:image:width content=1200><meta property=og:image:height content=630><meta content=https://matthew-shaw.github.io/blog/2024/11/04/building-a-static-site-with-mkdocs-nginx-and-docker/ property=og:url><meta name=twitter:card content=summary_large_image><meta name=twitter:title content="Building a static site with MkDocs, NGINX and Docker - Matt Shaw"><meta name=twitter:description content="A guide to building a highly customisable, lightweight, secure, and performant static site using MkDocs, NGINX and Docker."><meta name=twitter:image content=https://matthew-shaw.github.io/assets/images/social/blog/posts/mkdocs-docker-nginx.png><link href=../../../../../assets/stylesheets/glightbox.min.css rel=stylesheet><script src=../../../../../assets/javascripts/glightbox.min.js></script><style id=glightbox-style>
            html.glightbox-open { overflow: initial; height: 100%; }
            .gslide-title { margin-top: 0px; user-select: text; }
            .gslide-desc { color: #666; user-select: text; }
            .gslide-image img { background: white; }
            .gscrollbar-fixer { padding-right: 15px; }
            .gdesc-inner { font-size: 0.75rem; }
            body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color); }
            body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color); }
            body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color); }
        </style></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#building-a-static-site-with-mkdocs-nginx-and-docker class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../../../../.. title="Matt Shaw" class="md-header__button md-logo" aria-label="Matt Shaw" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M9.4 118.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l160 160c12.5 12.5 12.5 32.8 0 45.3l-160 160c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L146.7 256zM224 384h256c17.7 0 32 14.3 32 32s-14.3 32-32 32H224c-17.7 0-32-14.3-32-32s14.3-32 32-32"></path></svg> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"></path></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Matt Shaw </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Building a static site with MkDocs, NGINX and Docker </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media=(prefers-color-scheme) data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to light mode" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="m14.3 16-.7-2h-3.2l-.7 2H7.8L11 7h2l3.2 9zM20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12zm-9.15 3.96h2.3L12 9z"></path></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme=default data-md-color-primary=custom data-md-color-accent=custom aria-label="Switch to dark mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_2 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"></path></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme=slate data-md-color-primary=custom data-md-color-accent=custom aria-label="Switch to system preference" type=radio name=__palette id=__palette_2> <label class="md-header__button md-icon" title="Switch to system preference" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"></path></svg> </label> </form> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"></path></svg> </label> <nav class=md-search__options aria-label=Search> <a href=javascript:void(0) class="md-search__icon md-icon" title=Share aria-label=Share data-clipboard data-clipboard-text data-md-component=search-share tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"></path></svg> </a> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href="https://github.com/matthew-shaw/matthew-shaw.github.io" title="Go to repository" class="md-source" data-md-component="source"> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"></path></svg> </div> <div class=md-source__repository> matthew-shaw.github.io </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../../../../.. class=md-tabs__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M277.8 8.6c-12.3-11.4-31.3-11.4-43.5 0l-224 208c-9.6 9-12.8 22.9-8 35.1S18.8 272 32 272h16v176c0 35.3 28.7 64 64 64h288c35.3 0 64-28.7 64-64V272h16c13.2 0 25-8.1 29.8-20.3s1.6-26.2-8-35.1zM240 320h32c26.5 0 48 21.5 48 48v96H192v-96c0-26.5 21.5-48 48-48"></path></svg> Home </a> </li> <li class="md-tabs__item md-tabs__item--active"> <a href=../../../../ class=md-tabs__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M224 24c0-13.3 10.7-24 24-24 145.8 0 264 118.2 264 264 0 13.3-10.7 24-24 24s-24-10.7-24-24c0-119.3-96.7-216-216-216-13.3 0-24-10.7-24-24M80 96c26.5 0 48 21.5 48 48v224c0 26.5 21.5 48 48 48s48-21.5 48-48-21.5-48-48-48c-8.8 0-16-7.2-16-16v-64c0-8.8 7.2-16 16-16 79.5 0 144 64.5 144 144s-64.5 144-144 144S32 447.5 32 368V144c0-26.5 21.5-48 48-48m168 0c92.8 0 168 75.2 168 168 0 13.3-10.7 24-24 24s-24-10.7-24-24c0-66.3-53.7-120-120-120-13.3 0-24-10.7-24-24s10.7-24 24-24"></path></svg> Blog </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation hidden> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../../../../.. title="Matt Shaw" class="md-nav__button md-logo" aria-label="Matt Shaw" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M9.4 118.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l160 160c12.5 12.5 12.5 32.8 0 45.3l-160 160c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L146.7 256zM224 384h256c17.7 0 32 14.3 32 32s-14.3 32-32 32H224c-17.7 0-32-14.3-32-32s14.3-32 32-32"></path></svg> </a> Matt Shaw </label> <div class=md-nav__source> <a href="https://github.com/matthew-shaw/matthew-shaw.github.io" title="Go to repository" class="md-source" data-md-component="source"> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"></path></svg> </div> <div class=md-source__repository> matthew-shaw.github.io </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_1> <div class="md-nav__link md-nav__container"> <a href=../../../../.. class="md-nav__link "> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M277.8 8.6c-12.3-11.4-31.3-11.4-43.5 0l-224 208c-9.6 9-12.8 22.9-8 35.1S18.8 272 32 272h16v176c0 35.3 28.7 64 64 64h288c35.3 0 64-28.7 64-64V272h16c13.2 0 25-8.1 29.8-20.3s1.6-26.2-8-35.1zM240 320h32c26.5 0 48 21.5 48 48v96H192v-96c0-26.5 21.5-48 48-48"></path></svg> <span class=md-ellipsis> Home </span> </a> <label class="md-nav__link " for=__nav_1 id=__nav_1_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_1_label aria-expanded=false> <label class=md-nav__title for=__nav_1> <span class="md-nav__icon md-icon"></span> Home </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../tags/ class=md-nav__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 576 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="m401.2 39.1 148.2 150.3c27.7 28.1 27.7 73.1 0 101.2L393 448.9c-9.3 9.4-24.5 9.5-33.9.2s-9.5-24.5-.2-33.9l156.4-158.4c9.2-9.3 9.2-24.4 0-33.7L367 72.9c-9.3-9.4-9.2-24.6.2-33.9s24.6-9.2 33.9.2zM32.1 229.5V96c0-35.3 28.7-64 64-64h133.5c17 0 33.3 6.7 45.3 18.7l144 144c25 25 25 65.5 0 90.5L285.4 418.7c-25 25-65.5 25-90.5 0l-144-144c-12-12-18.7-28.3-18.7-45.3zm144-85.5a32 32 0 1 0-64 0 32 32 0 1 0 64 0"></path></svg> <span class=md-ellipsis> Tags </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2 checked> <div class="md-nav__link md-nav__container"> <a href=../../../../ class="md-nav__link "> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M224 24c0-13.3 10.7-24 24-24 145.8 0 264 118.2 264 264 0 13.3-10.7 24-24 24s-24-10.7-24-24c0-119.3-96.7-216-216-216-13.3 0-24-10.7-24-24M80 96c26.5 0 48 21.5 48 48v224c0 26.5 21.5 48 48 48s48-21.5 48-48-21.5-48-48-48c-8.8 0-16-7.2-16-16v-64c0-8.8 7.2-16 16-16 79.5 0 144 64.5 144 144s-64.5 144-144 144S32 447.5 32 368V144c0-26.5 21.5-48 48-48m168 0c92.8 0 168 75.2 168 168 0 13.3-10.7 24-24 24s-24-10.7-24-24c0-66.3-53.7-120-120-120-13.3 0-24-10.7-24-24s10.7-24 24-24"></path></svg> <span class=md-ellipsis> Blog </span> </a> <label class="md-nav__link " for=__nav_2 id=__nav_2_label tabindex> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_2_label aria-expanded=true> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Blog </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_2> <label class=md-nav__link for=__nav_2_2 id=__nav_2_2_label tabindex> <span class=md-ellipsis> Archive </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2_2> <span class="md-nav__icon md-icon"></span> Archive </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../archive/2025/ class=md-nav__link> <span class=md-ellipsis> 2025 </span> </a> </li> <li class=md-nav__item> <a href=../../../../archive/2024/ class=md-nav__link> <span class=md-ellipsis> 2024 </span> </a> </li> <li class=md-nav__item> <a href=../../../../archive/2021/ class=md-nav__link> <span class=md-ellipsis> 2021 </span> </a> </li> <li class=md-nav__item> <a href=../../../../archive/2020/ class=md-nav__link> <span class=md-ellipsis> 2020 </span> </a> </li> <li class=md-nav__item> <a href=../../../../archive/2019/ class=md-nav__link> <span class=md-ellipsis> 2019 </span> </a> </li> <li class=md-nav__item> <a href=../../../../archive/2018/ class=md-nav__link> <span class=md-ellipsis> 2018 </span> </a> </li> <li class=md-nav__item> <a href=../../../../archive/2016/ class=md-nav__link> <span class=md-ellipsis> 2016 </span> </a> </li> <li class=md-nav__item> <a href=../../../../archive/2014/ class=md-nav__link> <span class=md-ellipsis> 2014 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_3> <label class=md-nav__link for=__nav_2_3 id=__nav_2_3_label tabindex> <span class=md-ellipsis> Categories </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_3_label aria-expanded=false> <label class=md-nav__title for=__nav_2_3> <span class="md-nav__icon md-icon"></span> Categories </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../category/health/ class=md-nav__link> <span class=md-ellipsis> Health </span> </a> </li> <li class=md-nav__item> <a href=../../../../category/mash-software/ class=md-nav__link> <span class=md-ellipsis> Mash Software </span> </a> </li> <li class=md-nav__item> <a href=../../../../category/software-development/ class=md-nav__link> <span class=md-ellipsis> Software Development </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#prerequisites class=md-nav__link> <span class=md-ellipsis> Prerequisites </span> </a> </li> <li class=md-nav__item> <a href=#setup class=md-nav__link> <span class=md-ellipsis> Setup </span> </a> </li> <li class=md-nav__item> <a href=#configuring-mkdocs class=md-nav__link> <span class=md-ellipsis> Configuring MkDocs </span> </a> </li> <li class=md-nav__item> <a href=#docker-setup class=md-nav__link> <span class=md-ellipsis> Docker setup </span> </a> </li> <li class=md-nav__item> <a href=#multi-stage-builds class=md-nav__link> <span class=md-ellipsis> Multi-stage builds </span> </a> </li> <li class=md-nav__item> <a href=#configuring-nginx class=md-nav__link> <span class=md-ellipsis> Configuring NGINX </span> </a> </li> <li class=md-nav__item> <a href=#security class=md-nav__link> <span class=md-ellipsis> Security </span> </a> <nav class=md-nav aria-label=Security> <ul class=md-nav__list> <li class=md-nav__item> <a href=#content-security-policy class=md-nav__link> <span class=md-ellipsis> Content Security Policy </span> </a> </li> <li class=md-nav__item> <a href=#permissions-policy class=md-nav__link> <span class=md-ellipsis> Permissions Policy </span> </a> </li> <li class=md-nav__item> <a href=#strict-transport-security class=md-nav__link> <span class=md-ellipsis> Strict-Transport-Security </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#optimisation class=md-nav__link> <span class=md-ellipsis> Optimisation </span> </a> <nav class=md-nav aria-label=Optimisation> <ul class=md-nav__list> <li class=md-nav__item> <a href=#compression class=md-nav__link> <span class=md-ellipsis> Compression </span> </a> </li> <li class=md-nav__item> <a href=#caching class=md-nav__link> <span class=md-ellipsis> Caching </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#conclusion class=md-nav__link> <span class=md-ellipsis> Conclusion </span> </a> </li> </ul> </nav> </div> </div> </div> <div class="md-content md-content--post" data-md-component=content> <div class="md-sidebar md-sidebar--post" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class="md-sidebar__inner md-post"> <nav class="md-nav md-nav--primary"> <div class=md-post__back> <div class="md-nav__title md-nav__container"> <a href=../../../../ class=md-nav__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"></path></svg> <span class=md-ellipsis> Back to index </span> </a> </div> </div> <div class="md-post__authors md-typeset"> <div class="md-profile md-post__profile"> <span class="md-author md-author--long"> <img src="../../../../../assets/external/github.com/matthew-shaw.png.jpg" alt="Matt Shaw"> </span> <span class=md-profile__description> <strong> <a href="https://matthew-shaw.github.io/">Matt Shaw</a> </strong> <br> Principal Software Developer </span> </div> </div> <ul class="md-post__meta md-nav__list"> <li class="md-nav__item md-nav__item--section"> <div class=md-post__title> <span class=md-ellipsis> Metadata </span> </div> <nav class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <div class=md-nav__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 19H5V8h14m-3-7v2H8V1H6v2H5c-1.11 0-2 .89-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2h-1V1m-1 11h-5v5h5z"></path></svg> <time datetime="2024-11-04 00:00:00+00:00" class=md-ellipsis>November 4, 2024</time> </div> </li> <li class=md-nav__item> <div class=md-nav__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9 3v15h3V3zm3 2 4 13 3-1-4-13zM5 5v13h3V5zM3 19v2h18v-2z"></path></svg> <span class=md-ellipsis> in <a href=../../../../category/software-development/ >Software Development</a></span> </div> </li> <li class=md-nav__item> <div class=md-nav__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 20a8 8 0 0 0 8-8 8 8 0 0 0-8-8 8 8 0 0 0-8 8 8 8 0 0 0 8 8m0-18a10 10 0 0 1 10 10 10 10 0 0 1-10 10C6.47 22 2 17.5 2 12A10 10 0 0 1 12 2m.5 5v5.25l4.5 2.67-.75 1.23L11 13V7z"></path></svg> <span class=md-ellipsis> 11 min read </span> </div> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <article class="md-content__inner md-typeset"> <nav class=md-tags> <a href=../../../../../tags/#tag:docker class="md-tag md-tag-icon md-tag--docker">Docker</a> <a href=../../../../../tags/#tag:mkdocs class="md-tag md-tag-icon md-tag--markdown">MkDocs</a> <a href=../../../../../tags/#tag:nginx class="md-tag md-tag-icon md-tag--server">NGINX</a> <a href=../../../../../tags/#tag:performance class="md-tag md-tag-icon md-tag--performance">Performance</a> <a href=../../../../../tags/#tag:python class="md-tag md-tag-icon md-tag--python">Python</a> <a href=../../../../../tags/#tag:security class="md-tag md-tag-icon md-tag--security">Security</a> </nav> <h1 id=building-a-static-site-with-mkdocs-nginx-and-docker>Building a static site with MkDocs, NGINX and Docker<a class=headerlink href=#building-a-static-site-with-mkdocs-nginx-and-docker title="Permanent link">¶</a></h1> <p>A guide to building a highly customisable, lightweight, secure, and performant static site using MkDocs, NGINX and Docker.</p> <h2 id=prerequisites>Prerequisites<a class=headerlink href=#prerequisites title="Permanent link">¶</a></h2> <p>You will need Python and Docker installed on your system before starting. I recommend using a version manager such as <a href="https://github.com/pyenv/pyenv">pyenv</a> to install Python.</p> <div class="admonition tip"> <p class=admonition-title>Tip</p> <p>If you run <code>pyenv local 3.13</code> it will create a <code>.python-version</code> file which pyenv reads to determine which Python version to use.</p> </div> <h2 id=setup>Setup<a class=headerlink href=#setup title="Permanent link">¶</a></h2> <p>First, lets install <a href="https://squidfunk.github.io/mkdocs-material/">Material for MkDocs</a>, the popular and widely used MkDocs theme that adds a lot of features and extensions on top of MkDocs itself:</p> <div class="language-shell highlight"><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a>pip<span class=w> </span>install<span class=w> </span>mkdocs-material
</span></code></pre></div> <p>I can now create the new site using:</p> <div class="language-shell highlight"><pre><span></span><code><span id=__span-1-1><a id=__codelineno-1-1 name=__codelineno-1-1 href=#__codelineno-1-1></a>mkdocs<span class=w> </span>new<span class=w> </span>mysite
</span><span id=__span-1-2><a id=__codelineno-1-2 name=__codelineno-1-2 href=#__codelineno-1-2></a><span class=nb>cd</span><span class=w> </span>mysite
</span></code></pre></div> <p>I prefer to manage my Python dependencies using a <code>requirements.in</code> file which defines the top-level dependencies that my project directly relies upon. I'm going to create a very basic site for this example, but you can build and expand on it from there.</p> <div class="language-text highlight"><table class=highlighttable><tbody><tr><th colspan=2 class=filename><span class=filename>requirements.in</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-2-1>1</a></span>
<span class=normal><a href=#__codelineno-2-2>2</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-2-1><a id=__codelineno-2-1 name=__codelineno-2-1></a>mkdocs-material==9.5.43
</span><span id=__span-2-2><a id=__codelineno-2-2 name=__codelineno-2-2></a>mkdocs-minify-plugin==0.8.0
</span></code></pre></div></td></tr></tbody></table></div> <p>From there I use <a href="https://pip-tools.readthedocs.io/en/latest/">pip-tools</a> to compile the <code>.in</code> file and generate the familiar <code>requirements.txt</code> file, using this command:</p> <div class="language-shell highlight"><pre><span></span><code><span id=__span-3-1><a id=__codelineno-3-1 name=__codelineno-3-1 href=#__codelineno-3-1></a>pip-compile<span class=w> </span>requirements.in<span class=w> </span>--upgrade
</span></code></pre></div> <p>Now I'm ready to install the requirements:</p> <div class="language-shell highlight"><pre><span></span><code><span id=__span-4-1><a id=__codelineno-4-1 name=__codelineno-4-1 href=#__codelineno-4-1></a>pip<span class=w> </span>install<span class=w> </span>-r<span class=w> </span>requirements.txt
</span></code></pre></div> <h2 id=configuring-mkdocs>Configuring MkDocs<a class=headerlink href=#configuring-mkdocs title="Permanent link">¶</a></h2> <p>Material for MkDocs is highly customisable, with a lot of extensions and plugins available. I recommend starting with a configuration such as this and working from there:</p> <div class="language-yaml highlight"><table class=highlighttable><tbody><tr><th colspan=2 class=filename><span class=filename>mkdocs.yml</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-5-1> 1</a></span>
<span class=normal><a href=#__codelineno-5-2> 2</a></span>
<span class=normal><a href=#__codelineno-5-3> 3</a></span>
<span class=normal><a href=#__codelineno-5-4> 4</a></span>
<span class=normal><a href=#__codelineno-5-5> 5</a></span>
<span class=normal><a href=#__codelineno-5-6> 6</a></span>
<span class=normal><a href=#__codelineno-5-7> 7</a></span>
<span class=normal><a href=#__codelineno-5-8> 8</a></span>
<span class=normal><a href=#__codelineno-5-9> 9</a></span>
<span class=normal><a href=#__codelineno-5-10>10</a></span>
<span class=normal><a href=#__codelineno-5-11>11</a></span>
<span class=normal><a href=#__codelineno-5-12>12</a></span>
<span class=normal><a href=#__codelineno-5-13>13</a></span>
<span class=normal><a href=#__codelineno-5-14>14</a></span>
<span class=normal><a href=#__codelineno-5-15>15</a></span>
<span class=normal><a href=#__codelineno-5-16>16</a></span>
<span class=normal><a href=#__codelineno-5-17>17</a></span>
<span class=normal><a href=#__codelineno-5-18>18</a></span>
<span class=normal><a href=#__codelineno-5-19>19</a></span>
<span class=normal><a href=#__codelineno-5-20>20</a></span>
<span class=normal><a href=#__codelineno-5-21>21</a></span>
<span class=normal><a href=#__codelineno-5-22>22</a></span>
<span class=normal><a href=#__codelineno-5-23>23</a></span>
<span class=normal><a href=#__codelineno-5-24>24</a></span>
<span class=normal><a href=#__codelineno-5-25>25</a></span>
<span class=normal><a href=#__codelineno-5-26>26</a></span>
<span class=normal><a href=#__codelineno-5-27>27</a></span>
<span class=normal><a href=#__codelineno-5-28>28</a></span>
<span class=normal><a href=#__codelineno-5-29>29</a></span>
<span class=normal><a href=#__codelineno-5-30>30</a></span>
<span class=normal><a href=#__codelineno-5-31>31</a></span>
<span class=normal><a href=#__codelineno-5-32>32</a></span>
<span class=normal><a href=#__codelineno-5-33>33</a></span>
<span class=normal><a href=#__codelineno-5-34>34</a></span>
<span class=normal><a href=#__codelineno-5-35>35</a></span>
<span class=normal><a href=#__codelineno-5-36>36</a></span>
<span class=normal><a href=#__codelineno-5-37>37</a></span>
<span class=normal><a href=#__codelineno-5-38>38</a></span>
<span class=normal><a href=#__codelineno-5-39>39</a></span>
<span class=normal><a href=#__codelineno-5-40>40</a></span>
<span class=normal><a href=#__codelineno-5-41>41</a></span>
<span class=normal><a href=#__codelineno-5-42>42</a></span>
<span class=normal><a href=#__codelineno-5-43>43</a></span>
<span class=normal><a href=#__codelineno-5-44>44</a></span>
<span class=normal><a href=#__codelineno-5-45>45</a></span>
<span class=normal><a href=#__codelineno-5-46>46</a></span>
<span class=normal><a href=#__codelineno-5-47>47</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-5-1><a id=__codelineno-5-1 name=__codelineno-5-1></a><span class=nt>site_name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">My site</span>
</span><span id=__span-5-2><a id=__codelineno-5-2 name=__codelineno-5-2></a><span class=nt>site_url</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">https://mydomain.org/mysite</span>
</span><span id=__span-5-3><a id=__codelineno-5-3 name=__codelineno-5-3></a>
</span><span id=__span-5-4><a id=__codelineno-5-4 name=__codelineno-5-4></a><span class=nt>validation</span><span class=p>:</span>
</span><span id=__span-5-5><a id=__codelineno-5-5 name=__codelineno-5-5></a><span class=w>  </span><span class=nt>absolute_links</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">warn</span>
</span><span id=__span-5-6><a id=__codelineno-5-6 name=__codelineno-5-6></a><span class=w>  </span><span class=nt>anchors</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">warn</span>
</span><span id=__span-5-7><a id=__codelineno-5-7 name=__codelineno-5-7></a><span class=w>  </span><span class=nt>omitted_files</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">warn</span>
</span><span id=__span-5-8><a id=__codelineno-5-8 name=__codelineno-5-8></a><span class=w>  </span><span class=nt>unrecognized_links</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">warn</span>
</span><span id=__span-5-9><a id=__codelineno-5-9 name=__codelineno-5-9></a>
</span><span id=__span-5-10><a id=__codelineno-5-10 name=__codelineno-5-10></a><span class=nt>theme</span><span class=p>:</span>
</span><span id=__span-5-11><a id=__codelineno-5-11 name=__codelineno-5-11></a><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">material</span>
</span><span id=__span-5-12><a id=__codelineno-5-12 name=__codelineno-5-12></a><span class=w>  </span><span class=nt>features</span><span class=p>:</span>
</span><span id=__span-5-13><a id=__codelineno-5-13 name=__codelineno-5-13></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">navigation.footer</span>
</span><span id=__span-5-14><a id=__codelineno-5-14 name=__codelineno-5-14></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">navigation.indexes</span>
</span><span id=__span-5-15><a id=__codelineno-5-15 name=__codelineno-5-15></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">navigation.sections</span>
</span><span id=__span-5-16><a id=__codelineno-5-16 name=__codelineno-5-16></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">navigation.top</span>
</span><span id=__span-5-17><a id=__codelineno-5-17 name=__codelineno-5-17></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">search.highlight</span>
</span><span id=__span-5-18><a id=__codelineno-5-18 name=__codelineno-5-18></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">search.share</span>
</span><span id=__span-5-19><a id=__codelineno-5-19 name=__codelineno-5-19></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">search.suggest</span>
</span><span id=__span-5-20><a id=__codelineno-5-20 name=__codelineno-5-20></a><span class=w>  </span><span class=nt>palette</span><span class=p>:</span>
</span><span id=__span-5-21><a id=__codelineno-5-21 name=__codelineno-5-21></a><span class=w>    </span><span class=c1># Palette toggle for automatic mode</span>
</span><span id=__span-5-22><a id=__codelineno-5-22 name=__codelineno-5-22></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>media</span><span class=p>:</span><span class=w> </span><span class=s>"(prefers-color-scheme)"</span>
</span><span id=__span-5-23><a id=__codelineno-5-23 name=__codelineno-5-23></a><span class=w>      </span><span class=nt>toggle</span><span class=p>:</span>
</span><span id=__span-5-24><a id=__codelineno-5-24 name=__codelineno-5-24></a><span class=w>        </span><span class=nt>icon</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">material/brightness-auto</span>
</span><span id=__span-5-25><a id=__codelineno-5-25 name=__codelineno-5-25></a><span class=w>        </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Switch to light mode</span>
</span><span id=__span-5-26><a id=__codelineno-5-26 name=__codelineno-5-26></a>
</span><span id=__span-5-27><a id=__codelineno-5-27 name=__codelineno-5-27></a><span class=w>    </span><span class=c1># Palette toggle for light mode</span>
</span><span id=__span-5-28><a id=__codelineno-5-28 name=__codelineno-5-28></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>media</span><span class=p>:</span><span class=w> </span><span class=s>"(prefers-color-scheme:</span><span class=nv> </span><span class=s>light)"</span>
</span><span id=__span-5-29><a id=__codelineno-5-29 name=__codelineno-5-29></a><span class=w>      </span><span class=nt>scheme</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">default</span>
</span><span id=__span-5-30><a id=__codelineno-5-30 name=__codelineno-5-30></a><span class=w>      </span><span class=nt>toggle</span><span class=p>:</span>
</span><span id=__span-5-31><a id=__codelineno-5-31 name=__codelineno-5-31></a><span class=w>        </span><span class=nt>icon</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">material/brightness-7</span>
</span><span id=__span-5-32><a id=__codelineno-5-32 name=__codelineno-5-32></a><span class=w>        </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Switch to dark mode</span>
</span><span id=__span-5-33><a id=__codelineno-5-33 name=__codelineno-5-33></a>
</span><span id=__span-5-34><a id=__codelineno-5-34 name=__codelineno-5-34></a><span class=w>    </span><span class=c1># Palette toggle for dark mode</span>
</span><span id=__span-5-35><a id=__codelineno-5-35 name=__codelineno-5-35></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>media</span><span class=p>:</span><span class=w> </span><span class=s>"(prefers-color-scheme:</span><span class=nv> </span><span class=s>dark)"</span>
</span><span id=__span-5-36><a id=__codelineno-5-36 name=__codelineno-5-36></a><span class=w>      </span><span class=nt>scheme</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">slate</span>
</span><span id=__span-5-37><a id=__codelineno-5-37 name=__codelineno-5-37></a><span class=w>      </span><span class=nt>toggle</span><span class=p>:</span>
</span><span id=__span-5-38><a id=__codelineno-5-38 name=__codelineno-5-38></a><span class=w>        </span><span class=nt>icon</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">material/brightness-4</span>
</span><span id=__span-5-39><a id=__codelineno-5-39 name=__codelineno-5-39></a><span class=w>        </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Switch to system preference</span>
</span><span id=__span-5-40><a id=__codelineno-5-40 name=__codelineno-5-40></a>
</span><span id=__span-5-41><a id=__codelineno-5-41 name=__codelineno-5-41></a><span class=nt>plugins</span><span class=p>:</span>
</span><span id=__span-5-42><a id=__codelineno-5-42 name=__codelineno-5-42></a><span class=w>  </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>minify</span><span class=p>:</span>
</span><span id=__span-5-43><a id=__codelineno-5-43 name=__codelineno-5-43></a><span class=w>      </span><span class=nt>minify_html</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</span><span id=__span-5-44><a id=__codelineno-5-44 name=__codelineno-5-44></a><span class=w>      </span><span class=nt>htmlmin_opts</span><span class=p>:</span>
</span><span id=__span-5-45><a id=__codelineno-5-45 name=__codelineno-5-45></a><span class=w>        </span><span class=nt>remove_comments</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</span><span id=__span-5-46><a id=__codelineno-5-46 name=__codelineno-5-46></a><span class=w>  </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">privacy</span>
</span><span id=__span-5-47><a id=__codelineno-5-47 name=__codelineno-5-47></a><span class=w>  </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">search</span>
</span></code></pre></div></td></tr></tbody></table></div> <p>This config sets up a site with automatic dark and light mode support, search suggestions, some basic navigation and minification support.</p> <p>You can test the setup so far is working by serving the site locally using:</p> <div class="language-shell highlight"><pre><span></span><code><span id=__span-6-1><a id=__codelineno-6-1 name=__codelineno-6-1 href=#__codelineno-6-1></a>mkdocs<span class=w> </span>serve
</span></code></pre></div> <p>Then in your browser, open <a href="http://localhost:8000/mysite/">http://localhost:8000/mysite/</a> <img alt="🎉" class="twemoji" src="../../../../../assets/external/cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/1f389.svg" title=":tada:"></p> <h2 id=docker-setup>Docker setup<a class=headerlink href=#docker-setup title="Permanent link">¶</a></h2> <p>Now I have a basic site created and working locally, let's get it working inside a Docker container. I'll start by creating a new <code>Dockerfile</code> with a simple example:</p> <div class="language-dockerfile highlight"><table class=highlighttable><tbody><tr><th colspan=2 class=filename><span class=filename>Dockerfile</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-7-1>1</a></span>
<span class=normal><a href=#__codelineno-7-2>2</a></span>
<span class=normal><a href=#__codelineno-7-3>3</a></span>
<span class=normal><a href=#__codelineno-7-4>4</a></span>
<span class=normal><a href=#__codelineno-7-5>5</a></span>
<span class=normal><a href=#__codelineno-7-6>6</a></span>
<span class=normal><a href=#__codelineno-7-7>7</a></span>
<span class=normal><a href=#__codelineno-7-8>8</a></span>
<span class=normal><a href=#__codelineno-7-9>9</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-7-1><a id=__codelineno-7-1 name=__codelineno-7-1></a><span class=k>FROM</span><span class=w> </span><span class=s>python:3.13-alpine</span>
</span><span id=__span-7-2><a id=__codelineno-7-2 name=__codelineno-7-2></a>
</span><span id=__span-7-3><a id=__codelineno-7-3 name=__codelineno-7-3></a><span class=k>COPY</span><span class=w> </span>requirements.txt<span class=w> </span>./
</span><span id=__span-7-4><a id=__codelineno-7-4 name=__codelineno-7-4></a><span class=k>RUN</span><span class=w> </span>pip<span class=w> </span>install<span class=w> </span>-r<span class=w> </span>requirements.txt
</span><span id=__span-7-5><a id=__codelineno-7-5 name=__codelineno-7-5></a>
</span><span id=__span-7-6><a id=__codelineno-7-6 name=__codelineno-7-6></a><span class=k>COPY</span><span class=w> </span>mkdocs.yml<span class=w> </span>./
</span><span id=__span-7-7><a id=__codelineno-7-7 name=__codelineno-7-7></a><span class=k>COPY</span><span class=w> </span>docs<span class=w> </span>docs
</span><span id=__span-7-8><a id=__codelineno-7-8 name=__codelineno-7-8></a>
</span><span id=__span-7-9><a id=__codelineno-7-9 name=__codelineno-7-9></a><span class=k>CMD</span><span class=w> </span><span class=p>[</span><span class=w> </span><span class=s2>"mkdocs"</span><span class=p>,</span><span class=w> </span><span class=s2>"serve"</span><span class=p>,</span><span class=w> </span><span class=s2>"--dev-addr=0.0.0.0:8000"</span><span class=w> </span><span class=p>]</span>
</span></code></pre></div></td></tr></tbody></table></div> <p>I'm using the <code>3.13-alpine</code> tag of the <a href="https://hub.docker.com/_/python">official Python image</a>. Using the alpine image variant keeps the image size down to a minimum, and reduces the number of potential security vulnerabilities in packages that I may not actually need. For comparison:</p> <table> <thead> <tr> <th>Tag</th> <th>Size</th> <th>Packages</th> <th>Vulnerabilities</th> </tr> </thead> <tbody> <tr> <td>3.13</td> <td>1.02GB</td> <td>575</td> <td>124</td> </tr> <tr> <td>3.13-slim</td> <td>121MB</td> <td>144</td> <td>25</td> </tr> <tr> <td>3.13-alpine</td> <td>44.6MB</td> <td>41</td> <td>1</td> </tr> </tbody> </table> <p>Then I copy the <code>requirements.txt</code> file into the root of the image filesystem and run <code>pip</code> to install them. Next, the <code>mkdocs.yml</code> file and the <code>/docs</code> directory are also copied. The ordering of these commands is important, to take advantage of layer caching and keep build times as fast as possible. The requirements and config are going to change less frequently than the site content. Files that change more often are further down in the file (and therefore layers), such that they invalidate the cache of fewer layers below them.</p> <p>Finally, the <code>mkdocs serve</code> command is executed in the container, to serve the site on the nonroutable <code>0.0.0.0</code> address (<em>"This host on this network"</em>, inside the container) and port 8000. To build the new image, run:</p> <div class="language-shell highlight"><pre><span></span><code><span id=__span-8-1><a id=__codelineno-8-1 name=__codelineno-8-1 href=#__codelineno-8-1></a>docker<span class=w> </span>build<span class=w> </span>.<span class=w> </span>-t<span class=w> </span>mysite
</span></code></pre></div> <p>And to run it, mapping port 8000 in the container, to port 8000 on the host:</p> <div class="language-shell highlight"><pre><span></span><code><span id=__span-9-1><a id=__codelineno-9-1 name=__codelineno-9-1 href=#__codelineno-9-1></a>docker<span class=w> </span>run<span class=w> </span>-p<span class=w> </span><span class=m>8000</span>:8000<span class=w> </span>mysite
</span></code></pre></div> <p>Going back to <a href="http://localhost:8000/mysite/">http://localhost:8000/mysite/</a> in your browser still works exactly the same as before, but now it's hitting the running Docker container instead. This also means that you (or anyone else) only need Docker installed on the host system, not Python, or the specific set of package requirements, making it more portable and isolated.</p> <h2 id=multi-stage-builds>Multi-stage builds<a class=headerlink href=#multi-stage-builds title="Permanent link">¶</a></h2> <p>I want to use NGINX to serve the static site content, but it's currently being served by MkDocs inside a Python image based container. All I really need is the generated content from the <code>/site</code> directory, as the Python runtime is only needed to build the content. To achieve that I'm going to use a <a href="https://docs.docker.com/build/building/multi-stage/">multi-stage build</a> to copy the <code>/site</code> directory into a NGINX container, leaving everything else behind. This also has the benefit of keeping the final image as small as possible.</p> <div class="language-dockerfile highlight"><table class=highlighttable><tbody><tr><th colspan=2 class=filename><span class=filename>Dockerfile</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-10-1> 1</a></span>
<span class=normal><a href=#__codelineno-10-2> 2</a></span>
<span class=normal><a href=#__codelineno-10-3> 3</a></span>
<span class=normal><a href=#__codelineno-10-4> 4</a></span>
<span class=normal><a href=#__codelineno-10-5> 5</a></span>
<span class=normal><a href=#__codelineno-10-6> 6</a></span>
<span class=normal><a href=#__codelineno-10-7> 7</a></span>
<span class=normal><a href=#__codelineno-10-8> 8</a></span>
<span class=normal><a href=#__codelineno-10-9> 9</a></span>
<span class=normal><a href=#__codelineno-10-10>10</a></span>
<span class=normal><a href=#__codelineno-10-11>11</a></span>
<span class=normal><a href=#__codelineno-10-12>12</a></span>
<span class=normal><a href=#__codelineno-10-13>13</a></span>
<span class=normal><a href=#__codelineno-10-14>14</a></span>
<span class=normal><a href=#__codelineno-10-15>15</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-10-1><a id=__codelineno-10-1 name=__codelineno-10-1></a><span class=hll><span class=c># Build stage</span>
</span></span><span id=__span-10-2><a id=__codelineno-10-2 name=__codelineno-10-2></a><span class=hll><span class=k>FROM</span><span class=w> </span><span class=s>python:3.13-alpine</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=s>builder</span>
</span></span><span id=__span-10-3><a id=__codelineno-10-3 name=__codelineno-10-3></a>
</span><span id=__span-10-4><a id=__codelineno-10-4 name=__codelineno-10-4></a><span class=k>COPY</span><span class=w> </span>requirements.txt<span class=w> </span>./
</span><span id=__span-10-5><a id=__codelineno-10-5 name=__codelineno-10-5></a><span class=k>RUN</span><span class=w> </span>pip<span class=w> </span>install<span class=w> </span>-r<span class=w> </span>requirements.txt
</span><span id=__span-10-6><a id=__codelineno-10-6 name=__codelineno-10-6></a>
</span><span id=__span-10-7><a id=__codelineno-10-7 name=__codelineno-10-7></a><span class=k>COPY</span><span class=w> </span>mkdocs.yml<span class=w> </span>./
</span><span id=__span-10-8><a id=__codelineno-10-8 name=__codelineno-10-8></a><span class=k>COPY</span><span class=w> </span>docs<span class=w> </span>docs
</span><span id=__span-10-9><a id=__codelineno-10-9 name=__codelineno-10-9></a>
</span><span id=__span-10-10><a id=__codelineno-10-10 name=__codelineno-10-10></a><span class=hll><span class=k>RUN</span><span class=w> </span>mkdocs<span class=w> </span>build<span class=w> </span>--strict
</span></span><span id=__span-10-11><a id=__codelineno-10-11 name=__codelineno-10-11></a><span class=hll>
</span></span><span id=__span-10-12><a id=__codelineno-10-12 name=__codelineno-10-12></a><span class=hll><span class=c># Final stage</span>
</span></span><span id=__span-10-13><a id=__codelineno-10-13 name=__codelineno-10-13></a><span class=hll><span class=k>FROM</span><span class=w> </span><span class=s>nginx:stable-alpine</span>
</span></span><span id=__span-10-14><a id=__codelineno-10-14 name=__codelineno-10-14></a><span class=hll>
</span></span><span id=__span-10-15><a id=__codelineno-10-15 name=__codelineno-10-15></a><span class=hll><span class=k>COPY</span><span class=w> </span>--from<span class=o>=</span>builder<span class=w> </span>/site<span class=w> </span>/site
</span></span></code></pre></div></td></tr></tbody></table></div> <p>I've named the first stage <code>builder</code>, which is the name used to copy files from further down. The <code class="language-docker highlight"><span class=k>CMD</span></code> has been replaced with <code class="language-docker highlight"><span class=k>RUN</span><span class=w> </span>mkdocs<span class=w> </span>build<span class=w> </span>--strict</code> to build the site content and abort on any warnings. The second <code class="language-docker highlight"><span class=k>FROM</span></code> instruction brings in our final <a href="https://hub.docker.com/_/nginx">NGINX image</a>, using the <code>stable-alpine</code> tag (keeping things lean again). The final <code class="language-docker highlight"><span class=k>COPY</span></code> instruction copies the <code>/site</code> directory from the <code>builder</code> stage into the <code>/site</code> directory of the current stage, leaving everything else from the build stage behind. The result of this multi-stage build approach is a large size reduction:</p> <table> <thead> <tr> <th>Build</th> <th>Size</th> </tr> </thead> <tbody> <tr> <td>Single-stage</td> <td>160MB</td> </tr> <tr> <td>Multi-stage</td> <td>45.7MB</td> </tr> </tbody> </table> <h2 id=configuring-nginx>Configuring NGINX<a class=headerlink href=#configuring-nginx title="Permanent link">¶</a></h2> <p>Did you know that <a href="https://owasp.org/Top10/A05_2021-Security_Misconfiguration/">security misconfiguration</a> is number 5 in the <a href="https://owasp.org/Top10/"><abbr title="Open Worldwide Application Security Project">OWASP</abbr> Top 10</a> security vulnerabilities? Luckily for us, Mozilla has a fantastic <a href="https://ssl-config.mozilla.org/">configuration generator</a> for most popular web servers, application servers and even databases. I've used this to generate a <a href="https://wiki.mozilla.org/Security/Server_Side_TLS">modern and secure</a> configuration that uses <abbr title="Hyper Text Transfer Protocol Secure">HTTPS</abbr> and <abbr title="Transport Layer Security">TLS</abbr> 1.3 cipher suites.</p> <div class="language-nginx highlight"><table class=highlighttable><tbody><tr><th colspan=2 class=filename><span class=filename>nginx.conf</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-11-1> 1</a></span>
<span class=normal><a href=#__codelineno-11-2> 2</a></span>
<span class=normal><a href=#__codelineno-11-3> 3</a></span>
<span class=normal><a href=#__codelineno-11-4> 4</a></span>
<span class=normal><a href=#__codelineno-11-5> 5</a></span>
<span class=normal><a href=#__codelineno-11-6> 6</a></span>
<span class=normal><a href=#__codelineno-11-7> 7</a></span>
<span class=normal><a href=#__codelineno-11-8> 8</a></span>
<span class=normal><a href=#__codelineno-11-9> 9</a></span>
<span class=normal><a href=#__codelineno-11-10>10</a></span>
<span class=normal><a href=#__codelineno-11-11>11</a></span>
<span class=normal><a href=#__codelineno-11-12>12</a></span>
<span class=normal><a href=#__codelineno-11-13>13</a></span>
<span class=normal><a href=#__codelineno-11-14>14</a></span>
<span class=normal><a href=#__codelineno-11-15>15</a></span>
<span class=normal><a href=#__codelineno-11-16>16</a></span>
<span class=normal><a href=#__codelineno-11-17>17</a></span>
<span class=normal><a href=#__codelineno-11-18>18</a></span>
<span class=normal><a href=#__codelineno-11-19>19</a></span>
<span class=normal><a href=#__codelineno-11-20>20</a></span>
<span class=normal><a href=#__codelineno-11-21>21</a></span>
<span class=normal><a href=#__codelineno-11-22>22</a></span>
<span class=normal><a href=#__codelineno-11-23>23</a></span>
<span class=normal><a href=#__codelineno-11-24>24</a></span>
<span class=normal><a href=#__codelineno-11-25>25</a></span>
<span class=normal><a href=#__codelineno-11-26>26</a></span>
<span class=normal><a href=#__codelineno-11-27>27</a></span>
<span class=normal><a href=#__codelineno-11-28>28</a></span>
<span class=normal><a href=#__codelineno-11-29>29</a></span>
<span class=normal><a href=#__codelineno-11-30>30</a></span>
<span class=normal><a href=#__codelineno-11-31>31</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-11-1><a id=__codelineno-11-1 name=__codelineno-11-1></a><span class=c1># generated 2024-11-01, Mozilla Guideline v5.7, nginx 1.26.2, OpenSSL 3.3.2, modern configuration, no OCSP</span>
</span><span id=__span-11-2><a id=__codelineno-11-2 name=__codelineno-11-2></a><span class=c1># https://ssl-config.mozilla.org/#server=nginx&amp;version=1.26.2&amp;config=modern&amp;openssl=3.3.2&amp;ocsp=false&amp;guideline=5.7</span>
</span><span id=__span-11-3><a id=__codelineno-11-3 name=__codelineno-11-3></a><span class=k>server</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-11-4><a id=__codelineno-11-4 name=__codelineno-11-4></a><span class=w>    </span><span class=kn>listen</span><span class=w> </span><span class=mi>80</span><span class=w> </span><span class=s>default_server</span><span class=p>;</span>
</span><span id=__span-11-5><a id=__codelineno-11-5 name=__codelineno-11-5></a><span class=w>    </span><span class=kn>listen</span><span class=w> </span><span class=s>[::]:80</span><span class=w> </span><span class=s>default_server</span><span class=p>;</span>
</span><span id=__span-11-6><a id=__codelineno-11-6 name=__codelineno-11-6></a>
</span><span id=__span-11-7><a id=__codelineno-11-7 name=__codelineno-11-7></a><span class=w>    </span><span class=kn>location</span><span class=w> </span><span class=s>/</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-11-8><a id=__codelineno-11-8 name=__codelineno-11-8></a><span class=w>        </span><span class=kn>return</span><span class=w> </span><span class=mi>301</span><span class=w> </span><span class=s>https://</span><span class=nv>$host$request_uri</span><span class=p>;</span>
</span><span id=__span-11-9><a id=__codelineno-11-9 name=__codelineno-11-9></a><span class=w>    </span><span class=p>}</span>
</span><span id=__span-11-10><a id=__codelineno-11-10 name=__codelineno-11-10></a><span class=p>}</span>
</span><span id=__span-11-11><a id=__codelineno-11-11 name=__codelineno-11-11></a>
</span><span id=__span-11-12><a id=__codelineno-11-12 name=__codelineno-11-12></a><span class=k>server</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-11-13><a id=__codelineno-11-13 name=__codelineno-11-13></a><span class=w>    </span><span class=kn>listen</span><span class=w> </span><span class=mi>443</span><span class=w> </span><span class=s>ssl</span><span class=p>;</span>
</span><span id=__span-11-14><a id=__codelineno-11-14 name=__codelineno-11-14></a><span class=w>    </span><span class=kn>listen</span><span class=w> </span><span class=s>[::]:443</span><span class=w> </span><span class=s>ssl</span><span class=p>;</span>
</span><span id=__span-11-15><a id=__codelineno-11-15 name=__codelineno-11-15></a><span class=w>    </span><span class=kn>http2</span><span class=w> </span><span class=no>on</span><span class=p>;</span>
</span><span id=__span-11-16><a id=__codelineno-11-16 name=__codelineno-11-16></a>
</span><span id=__span-11-17><a id=__codelineno-11-17 name=__codelineno-11-17></a><span class=hll><span class=w>    </span><span class=kn>ssl_certificate</span><span class=w> </span><span class=s>/etc/nginx/ssl/req.pem</span><span class=p>;</span>
</span></span><span id=__span-11-18><a id=__codelineno-11-18 name=__codelineno-11-18></a><span class=hll><span class=w>    </span><span class=kn>ssl_certificate_key</span><span class=w> </span><span class=s>/etc/nginx/ssl/key.pem</span><span class=p>;</span>
</span></span><span id=__span-11-19><a id=__codelineno-11-19 name=__codelineno-11-19></a><span class=w>    </span><span class=kn>ssl_session_timeout</span><span class=w> </span><span class=s>1d</span><span class=p>;</span>
</span><span id=__span-11-20><a id=__codelineno-11-20 name=__codelineno-11-20></a><span class=w>    </span><span class=kn>ssl_session_cache</span><span class=w> </span><span class=s>shared:MozSSL:10m</span><span class=p>;</span><span class=w>  </span><span class=c1># about 40000 sessions</span>
</span><span id=__span-11-21><a id=__codelineno-11-21 name=__codelineno-11-21></a>
</span><span id=__span-11-22><a id=__codelineno-11-22 name=__codelineno-11-22></a><span class=w>    </span><span class=c1># modern configuration</span>
</span><span id=__span-11-23><a id=__codelineno-11-23 name=__codelineno-11-23></a><span class=w>    </span><span class=kn>ssl_protocols</span><span class=w> </span><span class=s>TLSv1.3</span><span class=p>;</span>
</span><span id=__span-11-24><a id=__codelineno-11-24 name=__codelineno-11-24></a><span class=w>    </span><span class=kn>ssl_prefer_server_ciphers</span><span class=w> </span><span class=no>off</span><span class=p>;</span>
</span><span id=__span-11-25><a id=__codelineno-11-25 name=__codelineno-11-25></a>
</span><span id=__span-11-26><a id=__codelineno-11-26 name=__codelineno-11-26></a><span class=w>    </span><span class=c1># HSTS (ngx_http_headers_module is required) (63072000 seconds)</span>
</span><span id=__span-11-27><a id=__codelineno-11-27 name=__codelineno-11-27></a><span class=w>    </span><span class=kn>add_header</span><span class=w> </span><span class=s>Strict-Transport-Security</span><span class=w> </span><span class=s>"max-age=63072000"</span><span class=w> </span><span class=s>always</span><span class=p>;</span>
</span><span id=__span-11-28><a id=__codelineno-11-28 name=__codelineno-11-28></a>
</span><span id=__span-11-29><a id=__codelineno-11-29 name=__codelineno-11-29></a><span class=hll><span class=w>    </span><span class=c1># static file location</span>
</span></span><span id=__span-11-30><a id=__codelineno-11-30 name=__codelineno-11-30></a><span class=hll><span class=w>    </span><span class=kn>root</span><span class=w> </span><span class=s>/site</span><span class=p>;</span>
</span></span><span id=__span-11-31><a id=__codelineno-11-31 name=__codelineno-11-31></a><span class=p>}</span>
</span></code></pre></div></td></tr></tbody></table></div> <p>This configuration redirects all <abbr title="Hyper Text Transfer Protocol">HTTP</abbr> traffic on port 80 to <abbr title="Hyper Text Transfer Protocol Secure">HTTPS</abbr> on port 443. I've changed the location of the <abbr title="Secure Sockets Layer">SSL</abbr> certificate and key on lines 17 and 18 to the directory I'm going to put them in. I've also set the <code class="language-nginx highlight"><span class=k>root</span></code> directive to tell NGINX where the static content is (and where to look for an <code>index.html</code> file). I just need to generate an <abbr title="Secure Sockets Layer">SSL</abbr> certificate before I can start to use this configuration:</p> <div class="language-dockerfile highlight"><table class=highlighttable><tbody><tr><th colspan=2 class=filename><span class=filename>Dockerfile</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-12-12>12</a></span>
<span class=normal><a href=#__codelineno-12-13>13</a></span>
<span class=normal><a href=#__codelineno-12-14>14</a></span>
<span class=normal><a href=#__codelineno-12-15>15</a></span>
<span class=normal><a href=#__codelineno-12-16>16</a></span>
<span class=normal><a href=#__codelineno-12-17>17</a></span>
<span class=normal><a href=#__codelineno-12-18>18</a></span>
<span class=normal><a href=#__codelineno-12-19>19</a></span>
<span class=normal><a href=#__codelineno-12-20>20</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-12-12><a id=__codelineno-12-12 name=__codelineno-12-12></a><span class=c># Final stage</span>
</span><span id=__span-12-13><a id=__codelineno-12-13 name=__codelineno-12-13></a><span class=k>FROM</span><span class=w> </span><span class=s>nginx:stable-alpine</span>
</span><span id=__span-12-14><a id=__codelineno-12-14 name=__codelineno-12-14></a>
</span><span id=__span-12-15><a id=__codelineno-12-15 name=__codelineno-12-15></a><span class=hll><span class=k>RUN</span><span class=w> </span>apk<span class=w> </span>update<span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span>apk<span class=w> </span>add<span class=w> </span>--no-cache<span class=w> </span>openssl<span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span><span class=se>\</span>
</span></span><span id=__span-12-16><a id=__codelineno-12-16 name=__codelineno-12-16></a><span class=hll><span class=w>    </span>mkdir<span class=w> </span>/etc/nginx/ssl<span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span><span class=se>\</span>
</span></span><span id=__span-12-17><a id=__codelineno-12-17 name=__codelineno-12-17></a><span class=hll><span class=w>    </span>openssl<span class=w> </span>req<span class=w> </span>-x509<span class=w> </span>-noenc<span class=w> </span>-newkey<span class=w> </span>rsa:2048<span class=w> </span>-keyout<span class=w> </span>/etc/nginx/ssl/key.pem<span class=w> </span>-out<span class=w> </span>/etc/nginx/ssl/req.pem<span class=w> </span>-days<span class=w> </span><span class=m>90</span><span class=w> </span>-subj<span class=w> </span><span class=s2>"/C=GB/ST=Devon/L=Plymouth/O=Mash Software/CN=localhost"</span>
</span></span><span id=__span-12-18><a id=__codelineno-12-18 name=__codelineno-12-18></a>
</span><span id=__span-12-19><a id=__codelineno-12-19 name=__codelineno-12-19></a><span class=hll><span class=k>COPY</span><span class=w> </span>nginx.conf<span class=w> </span>/etc/nginx/conf.d
</span></span><span id=__span-12-20><a id=__codelineno-12-20 name=__codelineno-12-20></a><span class=k>COPY</span><span class=w> </span>--from<span class=o>=</span>builder<span class=w> </span>/site<span class=w> </span>/site
</span></code></pre></div></td></tr></tbody></table></div> <p>Because I'm using the alpine image variant, the <code>openssl</code> package is not installed by default, so I've installed it, created the directory for the output, and used OpenSSL to create a new self-signed X.509 certificate. Finally, I've copied the <code>nginx.conf</code> file into the default directory NGINX looks for configuration files. Now I can rebuild the image:</p> <div class="language-shell highlight"><pre><span></span><code><span id=__span-13-1><a id=__codelineno-13-1 name=__codelineno-13-1 href=#__codelineno-13-1></a>docker<span class=w> </span>build<span class=w> </span>.<span class=w> </span>-t<span class=w> </span>mysite
</span></code></pre></div> <p>And run it again, but now mapping port 443 (<abbr title="Hyper Text Transfer Protocol Secure">HTTPS</abbr>) in the container, to port 443 on the host:</p> <div class="language-shell highlight"><pre><span></span><code><span id=__span-14-1><a id=__codelineno-14-1 name=__codelineno-14-1 href=#__codelineno-14-1></a>docker<span class=w> </span>run<span class=w> </span>-p<span class=w> </span><span class=m>443</span>:443<span class=w> </span>mysite
</span></code></pre></div> <p>Now when I open <a href="https://localhost">https://localhost</a> in my browser (and accept the self-signed certificate warning) I'm getting the static content served securely by NGINX. <img alt="🎉" class="twemoji" src="../../../../../assets/external/cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/1f389.svg" title=":tada:"></p> <h2 id=security>Security<a class=headerlink href=#security title="Permanent link">¶</a></h2> <p>There are a multitude of <abbr title="Hyper Text Transfer Protocol">HTTP</abbr> security response headers that can be set server-side to mitigate against many common attacks and security vulnerabilities. <abbr title="Open Worldwide Application Security Project">OWASP</abbr> have compiled an excellent <a href="https://cheatsheetseries.owasp.org/cheatsheets/HTTP_Headers_Cheat_Sheet">cheat sheet</a> to help understand what each of these do and the protection they afford. I've added what I consider to be the most appropriate ones to the <code>nginx.conf</code> file:</p> <div class="language-nginx highlight"><table class=highlighttable><tbody><tr><th colspan=2 class=filename><span class=filename>nginx.conf</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-15-22>22</a></span>
<span class=normal><a href=#__codelineno-15-23>23</a></span>
<span class=normal><a href=#__codelineno-15-24>24</a></span>
<span class=normal><a href=#__codelineno-15-25>25</a></span>
<span class=normal><a href=#__codelineno-15-26>26</a></span>
<span class=normal><a href=#__codelineno-15-27>27</a></span>
<span class=normal><a href=#__codelineno-15-28>28</a></span>
<span class=normal><a href=#__codelineno-15-29>29</a></span>
<span class=normal><a href=#__codelineno-15-30>30</a></span>
<span class=normal><a href=#__codelineno-15-31>31</a></span>
<span class=normal><a href=#__codelineno-15-32>32</a></span>
<span class=normal><a href=#__codelineno-15-33>33</a></span>
<span class=normal><a href=#__codelineno-15-34>34</a></span>
<span class=normal><a href=#__codelineno-15-35>35</a></span>
<span class=normal><a href=#__codelineno-15-36>36</a></span>
<span class=normal><a href=#__codelineno-15-37>37</a></span>
<span class=normal><a href=#__codelineno-15-38>38</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-15-22><a id=__codelineno-15-22 name=__codelineno-15-22></a><span class=w>    </span><span class=c1># modern configuration</span>
</span><span id=__span-15-23><a id=__codelineno-15-23 name=__codelineno-15-23></a><span class=w>    </span><span class=k>ssl_protocols</span><span class=w> </span><span class=s>TLSv1.3</span><span class=p>;</span>
</span><span id=__span-15-24><a id=__codelineno-15-24 name=__codelineno-15-24></a><span class=w>    </span><span class=k>ssl_prefer_server_ciphers</span><span class=w> </span><span class=no>off</span><span class=p>;</span>
</span><span id=__span-15-25><a id=__codelineno-15-25 name=__codelineno-15-25></a>
</span><span id=__span-15-26><a id=__codelineno-15-26 name=__codelineno-15-26></a><span class=hll><span class=w>    </span><span class=c1># security headers</span>
</span></span><span id=__span-15-27><a id=__codelineno-15-27 name=__codelineno-15-27></a><span class=hll><span class=w>    </span><span class=k>add_header</span><span class=w> </span><span class=s>Content-Security-Policy</span><span class=w> </span><span class=s>"script-src</span><span class=w> </span><span class=s>'self'</span><span class=w> </span><span class=s>'unsafe-inline'</span><span class=p>;</span><span class=w> </span><span class=k>object-src</span><span class=w> </span><span class=s>'none'</span><span class=p>;</span><span class=w> </span><span class=k>base-uri</span><span class=w> </span><span class=s>'none'</span><span class=p>;</span><span class=w> </span><span class=k>frame-ancestors</span><span class=w> </span><span class=s>'none'</span><span class=p>;</span><span class=k>"</span><span class=w> </span><span class=s>always</span><span class=p>;</span>
</span></span><span id=__span-15-28><a id=__codelineno-15-28 name=__codelineno-15-28></a><span class=hll><span class=w>    </span><span class=k>add_header</span><span class=w> </span><span class=s>Cross-Origin-Embedder-Policy</span><span class=w> </span><span class=s>"require-corp"</span><span class=w> </span><span class=s>always</span><span class=p>;</span>
</span></span><span id=__span-15-29><a id=__codelineno-15-29 name=__codelineno-15-29></a><span class=hll><span class=w>    </span><span class=k>add_header</span><span class=w> </span><span class=s>Cross-Origin-Opener-Policy</span><span class=w> </span><span class=s>"same-origin"</span><span class=w> </span><span class=s>always</span><span class=p>;</span>
</span></span><span id=__span-15-30><a id=__codelineno-15-30 name=__codelineno-15-30></a><span class=hll><span class=w>    </span><span class=k>add_header</span><span class=w> </span><span class=s>Cross-Origin-Resource-Policy</span><span class=w> </span><span class=s>"same-origin"</span><span class=w> </span><span class=s>always</span><span class=p>;</span>
</span></span><span id=__span-15-31><a id=__codelineno-15-31 name=__codelineno-15-31></a><span class=hll><span class=w>    </span><span class=k>add_header</span><span class=w> </span><span class=s>Permissions-Policy</span><span class=w> </span><span class=s>"accelerometer=(),</span><span class=w> </span><span class=s>ambient-light-sensor=(),</span><span class=w> </span><span class=s>autoplay=(),</span><span class=w> </span><span class=s>battery=(),</span><span class=w> </span><span class=s>camera=(),</span><span class=w> </span><span class=s>cross-origin-isolated=(),</span><span class=w> </span><span class=s>display-capture=(),</span><span class=w> </span><span class=s>document-domain=(),</span><span class=w> </span><span class=s>encrypted-media=(),</span><span class=w> </span><span class=s>execution-while-not-rendered=(),</span><span class=w> </span><span class=s>execution-while-out-of-viewport=(),</span><span class=w> </span><span class=s>fullscreen=(),</span><span class=w> </span><span class=s>geolocation=(),</span><span class=w> </span><span class=s>gyroscope=(),</span><span class=w> </span><span class=s>keyboard-map=(),</span><span class=w> </span><span class=s>magnetometer=(),</span><span class=w> </span><span class=s>microphone=(),</span><span class=w> </span><span class=s>midi=(),</span><span class=w> </span><span class=s>navigation-override=(),</span><span class=w> </span><span class=s>payment=(),</span><span class=w> </span><span class=s>picture-in-picture=(),</span><span class=w> </span><span class=s>publickey-credentials-get=(),</span><span class=w> </span><span class=s>screen-wake-lock=(),</span><span class=w> </span><span class=s>sync-xhr=(),</span><span class=w> </span><span class=s>usb=(),</span><span class=w> </span><span class=s>web-share=(),</span><span class=w> </span><span class=s>xr-spatial-tracking=()"</span><span class=w> </span><span class=s>always</span><span class=p>;</span>
</span></span><span id=__span-15-32><a id=__codelineno-15-32 name=__codelineno-15-32></a><span class=hll><span class=w>    </span><span class=k>add_header</span><span class=w> </span><span class=s>Referrer-Policy</span><span class=w> </span><span class=s>"strict-origin-when-cross-origin"</span><span class=w> </span><span class=s>always</span><span class=p>;</span>
</span></span><span id=__span-15-33><a id=__codelineno-15-33 name=__codelineno-15-33></a><span class=hll><span class=w>    </span><span class=k>add_header</span><span class=w> </span><span class=s>Strict-Transport-Security</span><span class=w> </span><span class=s>"max-age=63072000</span><span class=p>;</span><span class=w> </span><span class=k>includeSubDomains</span><span class=p>;</span><span class=w> </span><span class=k>preload"</span><span class=w> </span><span class=s>always</span><span class=p>;</span>
</span></span><span id=__span-15-34><a id=__codelineno-15-34 name=__codelineno-15-34></a><span class=hll><span class=w>    </span><span class=k>add_header</span><span class=w> </span><span class=s>X-Content-Type-Options</span><span class=w> </span><span class=s>"nosniff"</span><span class=w> </span><span class=s>always</span><span class=p>;</span>
</span></span><span id=__span-15-35><a id=__codelineno-15-35 name=__codelineno-15-35></a>
</span><span id=__span-15-36><a id=__codelineno-15-36 name=__codelineno-15-36></a><span class=w>    </span><span class=c1># static file location</span>
</span><span id=__span-15-37><a id=__codelineno-15-37 name=__codelineno-15-37></a><span class=w>    </span><span class=k>root</span><span class=w> </span><span class=s>/site</span><span class=p>;</span>
</span><span id=__span-15-38><a id=__codelineno-15-38 name=__codelineno-15-38></a><span class=k>}</span>
</span></code></pre></div></td></tr></tbody></table></div> <p>To call out just a few:</p> <h3 id=content-security-policy>Content Security Policy<a class=headerlink href=#content-security-policy title="Permanent link">¶</a></h3> <div class="admonition quote"> <p class=admonition-title>Mozilla Developer Network</p> <p><abbr title="Content Security Policy">CSP</abbr> is a feature that helps to prevent or minimize the risk of certain types of security threats. It consists of a series of instructions from a website to a browser, which instruct the browser to place restrictions on the things that the code comprising the site is allowed to do.</p> <p><a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/CSP">https://developer.mozilla.org/en-US/docs/Web/HTTP/CSP</a></p> </div> <p>Ideally, a strict <abbr title="Content Security Policy">CSP</abbr> would include the hashes of any inline scripts. However, MkDocs Material uses many inline scripts which makes this approach impractical, so for the purposes of a static content site, allowing <code>unsafe-inline</code> is a pragmatic compromise.</p> <h3 id=permissions-policy>Permissions Policy<a class=headerlink href=#permissions-policy title="Permanent link">¶</a></h3> <div class="admonition quote"> <p class=admonition-title>Mozilla Developer Network</p> <p>The <abbr title="Hyper Text Transfer Protocol">HTTP</abbr> Permissions-Policy header provides a mechanism to allow and deny the use of browser features.</p> <p><a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Permissions-Policy">https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Permissions-Policy</a></p> </div> <p>I've used the policy generator at <a href="https://www.permissionspolicy.com/">https://www.permissionspolicy.com/</a> to disable all of the standardised features.</p> <h3 id=strict-transport-security>Strict-Transport-Security<a class=headerlink href=#strict-transport-security title="Permanent link">¶</a></h3> <div class="admonition quote"> <p class=admonition-title>Mozilla Developer Network</p> <p><abbr title=Strict-Transport-Security>HSTS</abbr> informs browsers that the site should only be accessed using <abbr title="Hyper Text Transfer Protocol Secure">HTTPS</abbr>, and that any future attempts to access it using <abbr title="Hyper Text Transfer Protocol">HTTP</abbr> should automatically be converted to <abbr title="Hyper Text Transfer Protocol Secure">HTTPS</abbr>.</p> <p><a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Strict-Transport-Security">https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Strict-Transport-Security</a></p> </div> <p>This header is a default part of Mozilla's modern configuration but is important to note because just redirecting <abbr title="Hyper Text Transfer Protocol">HTTP</abbr> to <abbr title="Hyper Text Transfer Protocol Secure">HTTPS</abbr> alone is still vulnerable to a man-in-the-middle attack. The <code>max-age</code> is set to 2 years in seconds.</p> <h2 id=optimisation>Optimisation<a class=headerlink href=#optimisation title="Permanent link">¶</a></h2> <p>There are some key enhancements to optimise the performance of NGINX, particularly when being used to serve static files such as this:</p> <div class="language-nginx highlight"><table class=highlighttable><tbody><tr><th colspan=2 class=filename><span class=filename>nginx.conf</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-16-36>36</a></span>
<span class=normal><a href=#__codelineno-16-37>37</a></span>
<span class=normal><a href=#__codelineno-16-38>38</a></span>
<span class=normal><a href=#__codelineno-16-39>39</a></span>
<span class=normal><a href=#__codelineno-16-40>40</a></span>
<span class=normal><a href=#__codelineno-16-41>41</a></span>
<span class=normal><a href=#__codelineno-16-42>42</a></span>
<span class=normal><a href=#__codelineno-16-43>43</a></span>
<span class=normal><a href=#__codelineno-16-44>44</a></span>
<span class=normal><a href=#__codelineno-16-45>45</a></span>
<span class=normal><a href=#__codelineno-16-46>46</a></span>
<span class=normal><a href=#__codelineno-16-47>47</a></span>
<span class=normal><a href=#__codelineno-16-48>48</a></span>
<span class=normal><a href=#__codelineno-16-49>49</a></span>
<span class=normal><a href=#__codelineno-16-50>50</a></span>
<span class=normal><a href=#__codelineno-16-51>51</a></span>
<span class=normal><a href=#__codelineno-16-52>52</a></span>
<span class=normal><a href=#__codelineno-16-53>53</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-16-36><a id=__codelineno-16-36 name=__codelineno-16-36></a><span class=w>    </span><span class=c1># static file location</span>
</span><span id=__span-16-37><a id=__codelineno-16-37 name=__codelineno-16-37></a><span class=w>    </span><span class=k>root</span><span class=w> </span><span class=s>/site</span><span class=p>;</span>
</span><span id=__span-16-38><a id=__codelineno-16-38 name=__codelineno-16-38></a>
</span><span id=__span-16-39><a id=__codelineno-16-39 name=__codelineno-16-39></a><span class=hll><span class=w>    </span><span class=c1># optimise performance</span>
</span></span><span id=__span-16-40><a id=__codelineno-16-40 name=__codelineno-16-40></a><span class=hll><span class=w>    </span><span class=k>sendfile</span><span class=w> </span><span class=no>on</span><span class=p>;</span>
</span></span><span id=__span-16-41><a id=__codelineno-16-41 name=__codelineno-16-41></a><span class=hll><span class=w>    </span><span class=k>tcp_nopush</span><span class=w> </span><span class=no>on</span><span class=p>;</span>
</span></span><span id=__span-16-42><a id=__codelineno-16-42 name=__codelineno-16-42></a><span class=hll>
</span></span><span id=__span-16-43><a id=__codelineno-16-43 name=__codelineno-16-43></a><span class=hll><span class=w>    </span><span class=c1># gzip compression</span>
</span></span><span id=__span-16-44><a id=__codelineno-16-44 name=__codelineno-16-44></a><span class=hll><span class=w>    </span><span class=k>gzip</span><span class=w> </span><span class=no>on</span><span class=p>;</span>
</span></span><span id=__span-16-45><a id=__codelineno-16-45 name=__codelineno-16-45></a><span class=hll><span class=w>    </span><span class=k>gzip_comp_level</span><span class=w> </span><span class=mi>6</span><span class=p>;</span>
</span></span><span id=__span-16-46><a id=__codelineno-16-46 name=__codelineno-16-46></a><span class=hll><span class=w>    </span><span class=k>gzip_types</span><span class=w> </span><span class=s>application/javascript</span><span class=w> </span><span class=s>application/json</span><span class=w> </span><span class=s>application/xml</span><span class=w> </span><span class=s>font/otf</span><span class=w> </span><span class=s>font/ttf</span><span class=w> </span><span class=s>font/woff</span><span class=w> </span><span class=s>font/woff</span><span class=mi>2</span><span class=w> </span><span class=s>image/gif</span><span class=w> </span><span class=s>image/jpeg</span><span class=w> </span><span class=s>image/png</span><span class=w> </span><span class=s>image/svg+xml</span><span class=w> </span><span class=s>image/webp</span><span class=w> </span><span class=s>text/css</span><span class=w> </span><span class=s>text/csv</span><span class=w> </span><span class=s>text/javascript</span><span class=w> </span><span class=s>text/xml</span><span class=p>;</span>
</span></span><span id=__span-16-47><a id=__codelineno-16-47 name=__codelineno-16-47></a><span class=hll>
</span></span><span id=__span-16-48><a id=__codelineno-16-48 name=__codelineno-16-48></a><span class=hll><span class=w>    </span><span class=c1># caching</span>
</span></span><span id=__span-16-49><a id=__codelineno-16-49 name=__codelineno-16-49></a><span class=hll><span class=w>    </span><span class=k>location</span><span class=w> </span><span class=s>/assets</span><span class=w> </span><span class=p>{</span>
</span></span><span id=__span-16-50><a id=__codelineno-16-50 name=__codelineno-16-50></a><span class=hll><span class=w>        </span><span class=c1># set long lived cache</span>
</span></span><span id=__span-16-51><a id=__codelineno-16-51 name=__codelineno-16-51></a><span class=hll><span class=w>        </span><span class=kn>add_header</span><span class=w> </span><span class=s>Cache-Control</span><span class=w> </span><span class=s>"max-age=31536000,</span><span class=w> </span><span class=s>immutable"</span><span class=w> </span><span class=s>always</span><span class=p>;</span>
</span></span><span id=__span-16-52><a id=__codelineno-16-52 name=__codelineno-16-52></a><span class=hll><span class=w>    </span><span class=p>}</span>
</span></span><span id=__span-16-53><a id=__codelineno-16-53 name=__codelineno-16-53></a><span class=k>}</span>
</span></code></pre></div></td></tr></tbody></table></div> <p>Enabling <code>sendfile</code> and <code>tcp_nopush</code> are relatively <a href="https://docs.nginx.com/nginx/admin-guide/web-server/serving-static-content/#optimizing-performance-for-serving-content">minor configuration changes</a>, but bigger gains come from compression and caching:</p> <h3 id=compression>Compression<a class=headerlink href=#compression title="Permanent link">¶</a></h3> <p>Compressing responses using <code>gzip</code> can considerably reduce the size of data transmitted but comes at the cost of increased processing overhead. In the configuration above I've told NGINX to compress all the common content types you'll find in most web applications. Adjusting the compression level and observing the results can help to find the optimal setting:</p> <table> <thead> <tr> <th>Level</th> <th><abbr title="Hypertext Markup Language">HTML</abbr> (kB)</th> <th><abbr title="Cascading Style Sheets">CSS</abbr> (kB)</th> <th><abbr title=JavaScript>JS</abbr> (kB)</th> <th>Total (kB)</th> <th>Compression</th> </tr> </thead> <tbody> <tr> <td>0 (Off)</td> <td>13.2</td> <td>171</td> <td>109</td> <td>380</td> <td>0%</td> </tr> <tr> <td>1</td> <td>4.8</td> <td>35.2</td> <td>39.9</td> <td>166</td> <td>43.7%</td> </tr> <tr> <td>2</td> <td>4.7</td> <td>33.4</td> <td>38.5</td> <td>163</td> <td>42.9%</td> </tr> <tr> <td>3</td> <td>4.7</td> <td>32.3</td> <td>37.8</td> <td>161</td> <td>42.4%</td> </tr> <tr> <td>4</td> <td>4.4</td> <td>29.8</td> <td>35.3</td> <td>156</td> <td>41.0%</td> </tr> <tr> <td>5</td> <td>4.4</td> <td>28.4</td> <td>34.2</td> <td>153</td> <td>40.3%</td> </tr> <tr> <td><strong>6</strong></td> <td><strong>4.4</strong></td> <td><strong>27.8</strong></td> <td><strong>33.9</strong></td> <td><strong>152</strong></td> <td><strong>40.0%</strong></td> </tr> <tr> <td>7</td> <td>4.4</td> <td>27.7</td> <td>33.8</td> <td>152</td> <td>40.0%</td> </tr> <tr> <td>8</td> <td>4.4</td> <td>27.6</td> <td>33.8</td> <td>152</td> <td>40.0%</td> </tr> <tr> <td>9</td> <td>4.4</td> <td>27.6</td> <td>33.8</td> <td>152</td> <td>40.0%</td> </tr> </tbody> </table> <p>You can see that after compression level 6 there is no appreciable reduction in file sizes, so I'm going with that.</p> <h3 id=caching>Caching<a class=headerlink href=#caching title="Permanent link">¶</a></h3> <p>What's better than transferring an optimised, minified, and compressed file to the client? Not transferring one at all!</p> <p>The generated output <code>/site/assets</code> directory contains all the bundled JavaScript and <abbr title="Cascading Style Sheets">CSS</abbr> with cache-busting hashes appended to their file names. This means that when the content of the file changes, so does the hash of the file, therefore so does its path. Since a different file would be requested when it changes, I can instruct browsers to cache these files for a long time.</p> <p>In the NGINX config above I've added a location directive to add the <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Cache-Control">Cache-Control</a> header to any file requested from <code>/assets</code>. Browsers will keep these files in their cache for up to one year before requesting it again. For the example site, this equates to only 7.6 kB of 152 kB to be transferred for each page requested after the initial request, with everything else cached.</p> <h2 id=conclusion>Conclusion<a class=headerlink href=#conclusion title="Permanent link">¶</a></h2> <p>Material for MkDocs is a great choice for creating static sites, blogs, and project documentation. It's simple to set up and configure, highly customisable and extensible, plus authoring the content in markdown is easy and familiar to most developers. By using NGINX you can serve the MkDocs generated static site in a secure and highly performant way. Using Docker to build portable, isolated, and small containers makes development and deployment much easier as well.</p> <p>If you want to build your own site in this way, I have created a <a href="https://github.com/matthew-shaw/mkdocs">template repository on GitHub</a> which includes everything discussed above so you can get started quicker.</p> <hr> <p><a class="md-button md-button--primary" href="https://bsky.app/intent/compose?text=Building%20a%20static%20site%20with%20MkDocs%2C%20NGINX%20and%20Docker by @mash85.bsky.social https://matthew-shaw.github.io/blog/2024/11/04/building-a-static-site-with-mkdocs-nginx-and-docker/ %23Docker %23MkDocs %23NGINX %23Performance %23Python %23Security"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 576 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M407.8 294.7c-3.3-.4-6.7-.8-10-1.3 3.4.4 6.7.9 10 1.3M288 227.1c-26.1-50.7-97.1-145.2-163.1-191.8C61.6-9.4 37.5-1.7 21.6 5.5 3.3 13.8 0 41.9 0 58.4S9.1 194 15 213.9c19.5 65.7 89.1 87.9 153.2 80.7 3.3-.5 6.6-.9 10-1.4-3.3.5-6.6 1-10 1.4-93.9 14-177.3 48.2-67.9 169.9C220.6 589.1 265.1 437.8 288 361.1c22.9 76.7 49.2 222.5 185.6 103.4 102.4-103.4 28.1-156-65.8-169.9-3.3-.4-6.7-.8-10-1.3 3.4.4 6.7.9 10 1.3 64.1 7.1 133.6-15.1 153.2-80.7C566.9 194 576 75 576 58.4s-3.3-44.7-21.6-52.9c-15.8-7.1-40-14.9-103.2 29.8C385.1 81.9 314.1 176.4 288 227.1"></path></svg></span> Share on Bluesky</a></p> <p><a class="md-button md-button--primary" href="https://twitter.com/intent/tweet?text=Building%20a%20static%20site%20with%20MkDocs%2C%20NGINX%20and%20Docker&amp;url=https://matthew-shaw.github.io/blog/2024/11/04/building-a-static-site-with-mkdocs-nginx-and-docker/&amp;hashtags=Docker,MkDocs,NGINX,Performance,Python,Security,&amp;via=MattShaw85"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M357.2 48h70.6L273.6 224.2 455 464H313L201.7 318.6 74.5 464H3.8l164.9-188.5L-5.2 48h145.6l100.5 132.9zm-24.8 373.8h39.1L119.1 88h-42z"></path></svg></span> Share on Twitter</a></p> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"></path></svg> Back to top </button> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=Footer> <a href=../../../09/05/fitness-progress/ class="md-footer__link md-footer__link--prev" aria-label="Previous: Fitness progress"> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"></path></svg> </div> <div class=md-footer__title> <span class=md-footer__direction> Previous </span> <div class=md-ellipsis> Fitness progress </div> </div> </a> <a href=../../../../2025/10/25/the-eight-wastes-of-modern-software-delivery/ class="md-footer__link md-footer__link--next" aria-label="Next: The Eight Wastes of Modern Software Delivery"> <div class=md-footer__title> <span class=md-footer__direction> Next </span> <div class=md-ellipsis> The Eight Wastes of Modern Software Delivery </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"></path></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> © 2014-2025 Matthew Shaw. All rights reserved. </div> Made with <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener"> Material for MkDocs </a> </div> <div class=md-social> <a href="https://bsky.app/profile/mash85.bsky.social" target="_blank" rel="noopener" title="Bluesky" class="md-social__link"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 576 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M407.8 294.7c-3.3-.4-6.7-.8-10-1.3 3.4.4 6.7.9 10 1.3M288 227.1c-26.1-50.7-97.1-145.2-163.1-191.8C61.6-9.4 37.5-1.7 21.6 5.5 3.3 13.8 0 41.9 0 58.4S9.1 194 15 213.9c19.5 65.7 89.1 87.9 153.2 80.7 3.3-.5 6.6-.9 10-1.4-3.3.5-6.6 1-10 1.4-93.9 14-177.3 48.2-67.9 169.9C220.6 589.1 265.1 437.8 288 361.1c22.9 76.7 49.2 222.5 185.6 103.4 102.4-103.4 28.1-156-65.8-169.9-3.3-.4-6.7-.8-10-1.3 3.4.4 6.7.9 10 1.3 64.1 7.1 133.6-15.1 153.2-80.7C566.9 194 576 75 576 58.4s-3.3-44.7-21.6-52.9c-15.8-7.1-40-14.9-103.2 29.8C385.1 81.9 314.1 176.4 288 227.1"></path></svg> </a> <a href="https://github.com/matthew-shaw" target="_blank" rel="noopener" title="GitHub" class="md-social__link"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"></path></svg> </a> <a href="https://www.linkedin.com/in/matthew-shaw" target="_blank" rel="noopener" title="LinkedIn" class="md-social__link"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3M135.4 416H69V202.2h66.5V416zM102.2 96a38.5 38.5 0 1 1 0 77 38.5 38.5 0 1 1 0-77m282.1 320h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9z"></path></svg> </a> <a href="https://mastodon.me.uk/@mash" target="_blank" rel="noopener me" title="Mastodon" class="md-social__link"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M433 179.1c0-97.2-63.7-125.7-63.7-125.7-62.5-28.7-228.6-28.4-290.5 0 0 0-63.7 28.5-63.7 125.7 0 115.7-6.6 259.4 105.6 289.1 40.5 10.7 75.3 13 103.3 11.4 50.8-2.8 79.3-18.1 79.3-18.1l-1.7-36.9s-36.3 11.4-77.1 10.1c-40.4-1.4-83-4.4-89.6-54-.6-4.6-.9-9.3-.9-13.9 85.6 20.9 158.7 9.1 178.7 6.7 56.1-6.7 105-41.3 111.2-72.9 9.8-49.8 9-121.5 9-121.5zm-75.1 125.2h-46.6V190.1c0-49.7-64-51.6-64 6.9v62.5H201V197c0-58.5-64-56.6-64-6.9v114.2H90.3c0-122.1-5.2-147.9 18.4-175 25.9-28.9 79.8-30.8 103.8 6.1l11.6 19.5 11.6-19.5c24.1-37.1 78.1-34.8 103.8-6.1 23.7 27.3 18.4 53 18.4 175"></path></svg> </a> <a href="https://x.com/MattShaw85" target="_blank" rel="noopener" title="X" class="md-social__link"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M357.2 48h70.6L273.6 224.2 455 464H313L201.7 318.6 74.5 464H3.8l164.9-188.5L-5.2 48h145.6l100.5 132.9zm-24.8 373.8h39.1L119.1 88h-42z"></path></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <div class=md-progress data-md-component=progress role=progressbar></div> <script id=__config type=application/json>{"base": "../../../../..", "features": ["content.code.copy", "content.tooltips", "navigation.footer", "navigation.indexes", "navigation.instant", "navigation.instant.progress", "navigation.sections", "navigation.tabs", "navigation.top", "search.highlight", "search.share", "search.suggest"], "search": "../../../../../assets/javascripts/workers/search.973d3a69.min.js", "tags": {"Accessibility": "accessibility", "Agile": "agile", "Anxiety": "mental-health", "Bootstrap": "bootstrap", "CI/CD": "cicd", "Depression": "mental-health", "Docker": "docker", "Fitness": "fitness", "Flask": "python", "GOV.UK": "govuk", "JavaScript": "javascript", "Jinja": "python", "Maps": "location", "Mental Health": "mental-health", "MkDocs": "markdown", "NGINX": "server", "Node.js": "nodejs", "Performance": "performance", "PostgreSQL": "database", "Python": "python", "Redis": "database", "Running": "running", "SQLAlchemy": "python", "Security": "security", "Team": "team", "UX": "ux", "WTForms": "python", "Weight Loss": "weight-loss"}, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script> <script src=../../../../../assets/javascripts/bundle.f55a23d4.min.js></script> <script src="../../../../../assets/external/unpkg.com/tablesort@5.6.0/dist/tablesort.min.js"></script> <script src=../../../../../javascripts/tablesort.5a35bd.min.js></script> <script id=init-glightbox>document.querySelectorAll('.glightbox').forEach(function(element) {
    try {
        var img = element.querySelector('img');
        if (img && img.src) {
            element.setAttribute('href', img.src);
        } else {
            console.log('No img element with src attribute found');
        }
    } catch (error) {
        console.log('Error:', error);
    }
});
const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(()=>{ lightbox.reload(); });
</script></body></html>